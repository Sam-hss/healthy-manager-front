{"remainingRequest":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js!D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea_workspace\\healthy-manager-front\\src\\views\\suggest\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\idea_workspace\\healthy-manager-front\\src\\views\\suggest\\Index.vue","mtime":1617034347104},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1616656090222},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1616656132299}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Message from '../../components/messages/index';\nvar user = JSON.parse(localStorage.getItem(\"user\"));\nexport default {\n  name: \"Info\",\n  data: function data() {\n    return {\n      selectionItems: [],\n      messageSort: \"我收到的建议\",\n      searchDTO: {\n        page: 1,\n        rows: 10,\n        userId: \"\",\n        doctorId: \"\",\n        content: \"\",\n        isRead: \"\",\n        total: 0\n      },\n      messageDTO: {\n        title: \"\",\n        content: \"\",\n        isRead: \"\",\n        office: \"\",\n        doctorId: \"\",\n        status: \"\"\n      },\n      tableData: [],\n      dialogVisible: false,\n      dialogTitle: \"\",\n      isShow: false,\n      user: {},\n      roleData: [],\n      roleOptions: []\n    };\n  },\n  methods: {\n    handleSelectionChange: function handleSelectionChange(val) {\n      var _this = this;\n\n      this.selectionItems = [];\n      val.forEach(function (v) {\n        _this.selectionItems.push(v.id);\n      });\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.searchDTO.rows = val;\n      this.initData();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.searchDTO.page = val;\n      this.initData();\n    },\n    //初始化数据\n    initDate: function initDate() {\n      var self = this;\n      self.user = JSON.parse(localStorage.getItem(\"user\"));\n      self.roleData = JSON.parse(localStorage.getItem(\"role\"));\n\n      if (self.roleData.roleName === '学生') {\n        self.messageSort = \"我收到的建议\";\n      } else {\n        self.messageSort = \"我提出的建议\";\n      }\n\n      if (self.messageSort === \"我收到的建议\") {\n        self.searchDTO.userId = user.id;\n        self.searchDTO.doctorId = null;\n        self.$http.post(\"/suggestion/getInfoPage\", self.searchDTO).then(function (res) {\n          if (res.status === 200) {\n            self.tableData = res.data.list;\n            self.searchDTO.total = res.data.total;\n          }\n        });\n      } else {\n        self.searchDTO.userId = null;\n        self.searchDTO.doctorId = user.id;\n        self.$http.post(\"/suggestion/getInfoPage\", self.searchDTO).then(function (res) {\n          if (res.status === 200) {\n            self.tableData = res.data.list;\n            self.searchDTO.total = res.data.total;\n          }\n        });\n      }\n    },\n    //批量标记未已读\n    markToRead: function markToRead() {\n      var _this2 = this;\n\n      if (this.selectionItems.length < 1) {\n        this.$message.warning(\"至少需要选择一条数据\");\n      } else {\n        this.$http.post(\"/suggestion/setInfoRead\", {\n          isRead: 1,\n          ids: this.selectionItems\n        }).then(function (res) {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n\n            _this2.initDate();\n          }\n        });\n      }\n    },\n    //批量标记为未读\n    markToUnRead: function markToUnRead() {\n      var _this3 = this;\n\n      if (this.selectionItems.length < 1) {\n        this.$message.warning(\"至少需要选择一条数据\");\n      } else {\n        this.$http.post(\"/suggestion/setInfoRead\", {\n          isRead: 0,\n          ids: this.selectionItems\n        }).then(function (res) {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n\n            _this3.initDate();\n          }\n        });\n      }\n    },\n    //批量删除\n    deleteInfos: function deleteInfos() {\n      var _this4 = this;\n\n      if (this.selectionItems.length < 1) {\n        this.$message.warning(\"至少需要选择一条数据\");\n      } else {\n        Message.confirm(\"是否需要删除这些通知？\").then(function () {\n          _this4.$http.post(\"/suggestion/deleteByIds\", _this4.selectionItems).then(function (res) {\n            if (res.status === 200) {\n              Message.success(\"删除成功\");\n\n              _this4.initDate();\n            }\n          });\n        });\n      }\n    },\n    //单条查看\n    showInfo: function showInfo(data) {\n      this.dialogTitle = \"查看健康建议\";\n      this.dialogVisible = true;\n      this.messageDTO = data;\n      this.isShow = true;\n      console.log(data);\n    },\n    deleteInfo: function deleteInfo(data) {\n      var _this5 = this;\n\n      Message.confirm(\"是否需要删除此健康建议？\").then(function () {\n        var ids = [];\n        ids.push(data.id);\n\n        _this5.$http.post(\"/suggestion/deleteByIds\", ids).then(function (res) {\n          if (res.status === 200) {\n            Message.success(\"删除成功\");\n\n            _this5.initDate();\n          }\n        });\n      });\n    },\n    handleClose: function handleClose() {\n      this.dialogVisible = false;\n    },\n    getAllRole: function getAllRole() {\n      var _this6 = this;\n\n      this.$http.get(\"/role/all\").then(function (res) {\n        if (res.status === 200) {\n          _this6.roleOptions = res.data;\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.initDate();\n    this.getAllRole();\n  }\n};",{"version":3,"sources":["Index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <div style=\"display: flex;flex-direction: column;align-items: center;width: 100%;\">\r\n      <div style=\"margin: 40px 0\"><h1>{{messageSort}}</h1></div>\r\n      <el-card style=\"width: 80%;\">\r\n        <div style=\"display: flex;flex-direction: column;justify-content: space-around;align-items: center;margin-bottom: 50px\">\r\n          <div style=\"margin-top: 25px;width: 100%;display: flex;flex-direction: row;justify-content: space-around\">\r\n            <div>\r\n              <label style=\"font-size: 16px;font-weight: 600\">读取状态:</label>\r\n              <el-select style=\"width: 150px;margin-left: 5px\" value=\"searchDTO.status\" v-model=\"searchDTO.isRead\"\r\n                         @change=\"initDate\" clearable>\r\n                <el-option value=\"1\" label=\"已读\"></el-option>\r\n                <el-option value=\"0\" label=\"未读\"></el-option>\r\n              </el-select>\r\n            </div>\r\n            <div v-show=\"messageSort === '我收到的建议'\">\r\n              <label style=\"font-size: 16px;font-weight: 600\">医师描述:</label>\r\n              <el-select style=\"width: 150px;margin-left: 5px\" :value=\"searchDTO.office\" v-model=\"searchDTO.office\"\r\n                         @change=\"initDate\" clearable>\r\n                <el-option v-for=\"item in roleOptions\" :value=\"item.roleName\" :key=\"item.id\"\r\n                           :label=\"item.roleName\"></el-option>\r\n\r\n              </el-select>\r\n            </div>\r\n            <el-input style=\"width: 300px;margin-right: 15px\" prefix-icon=\"el-icon-search\" placeholder=\"根据消息内容查询\"\r\n                      v-model=\"searchDTO.content\">\r\n              <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"initDate\"></el-button>\r\n            </el-input>\r\n            <el-button type=\"primary\" @click=\"markToRead\">标记为已读</el-button>\r\n            <el-button type=\"info\" @click=\"markToUnRead\">标记为未读</el-button>\r\n            <el-button type=\"danger\" @click=\"deleteInfos\">批量删除</el-button>\r\n          </div>\r\n        </div>\r\n        <el-table\r\n                ref=\"multipleTable\"\r\n                @selection-change=\"handleSelectionChange\"\r\n                :data=\"tableData\"\r\n                style=\"width: 100%\">\r\n          <el-table-column\r\n                  type=\"selection\"\r\n                  width=\"55\">\r\n          </el-table-column>\r\n          <el-table-column\r\n                  label=\"读取状态\">\r\n            <template slot-scope=\"scope\">\r\n              <span :style=\"{color:(scope.row.isRead==0?'#FF0000':'#000')}\" v-text=\"scope.row.isRead==0?'未读':'已读'\"\r\n                    style=\"font-size: 20px;font-weight: 600\"></span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n                  label=\"创建日期\"\r\n                  width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.createDatetime}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n                  label=\"修改日期\"\r\n                  width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.updateDatetime}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n                  min-width=\"200\"\r\n                  prop=\"content\"\r\n                  label=\"建议内容\">\r\n          </el-table-column>\r\n          <el-table-column\r\n                  label=\"学生名称\"\r\n                  width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.userId | UserFilter}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n                  label=\"建议医师\"\r\n                  width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{scope.row.doctorId | UserFilter}}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n                  prop=\"office\"\r\n                  label=\"医师描述\"\r\n                  width=\"180\">\r\n          </el-table-column>\r\n          <el-table-column\r\n                  fixed=\"right\"\r\n                  label=\"操作\"\r\n                  align=\"center\"\r\n                  width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button icon=\"el-icon-search\" size=\"small\" @click=\"showInfo(scope.row)\"></el-button>\r\n              <el-button icon=\"el-icon-delete\" size=\"small\" @click=\"deleteInfo(scope.row)\"></el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"searchDTO.page\"\r\n                :page-sizes=\"[10, 15, 20, 30]\"\r\n                :page-size=\"searchDTO.rows\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"searchDTO.total\">\r\n        </el-pagination>\r\n      </el-card>\r\n      <el-dialog\r\n              :title=dialogTitle\r\n              :visible.sync=\"dialogVisible\"\r\n              width=\"40%\"\r\n              :before-close=\"handleClose\"\r\n              :modal=\"false\">\r\n        <el-row style=\"padding: 0 40px\">\r\n          <el-input type=\"textarea\" :rows=\"5\" disabled=\"true\" v-model=\"messageDTO.content\"></el-input>\r\n        </el-row>\r\n\r\n      </el-dialog>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Message from '../../components/messages/index'\r\n\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n  export default {\r\n    name: \"Info\",\r\n    data() {\r\n      return {\r\n        selectionItems: [],\r\n        messageSort: \"我收到的建议\",\r\n        searchDTO: {\r\n          page: 1,\r\n          rows: 10,\r\n          userId: \"\",\r\n          doctorId: \"\",\r\n          content: \"\",\r\n          isRead: \"\",\r\n          total: 0\r\n        },\r\n        messageDTO: {\r\n          title: \"\",\r\n          content: \"\",\r\n          isRead: \"\",\r\n          office: \"\",\r\n          doctorId: \"\",\r\n          status: \"\",\r\n        },\r\n        tableData: [],\r\n        dialogVisible: false,\r\n        dialogTitle: \"\",\r\n        isShow: false,\r\n        user: {},\r\n        roleData: [],\r\n        roleOptions: []\r\n      }\r\n    },\r\n    methods: {\r\n      handleSelectionChange(val) {\r\n        this.selectionItems = [];\r\n        val.forEach(v => {\r\n          this.selectionItems.push(v.id);\r\n        });\r\n      },\r\n      handleSizeChange(val) {\r\n        this.searchDTO.rows = val;\r\n        this.initData();\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.searchDTO.page = val;\r\n        this.initData();\r\n      },\r\n      //初始化数据\r\n      initDate() {\r\n        let self = this;\r\n        self.user = JSON.parse(localStorage.getItem(\"user\"));\r\n        self.roleData = JSON.parse(localStorage.getItem(\"role\"));\r\n        if (self.roleData.roleName === '学生') {\r\n          self.messageSort = \"我收到的建议\";\r\n        } else {\r\n          self.messageSort = \"我提出的建议\";\r\n        }\r\n        if (self.messageSort === \"我收到的建议\") {\r\n          self.searchDTO.userId = user.id;\r\n          self.searchDTO.doctorId = null;\r\n          self.$http.post(\"/suggestion/getInfoPage\", self.searchDTO).then(res => {\r\n            if (res.status === 200) {\r\n              self.tableData = res.data.list;\r\n              self.searchDTO.total = res.data.total;\r\n            }\r\n          })\r\n        } else {\r\n          self.searchDTO.userId = null;\r\n          self.searchDTO.doctorId = user.id;\r\n          self.$http.post(\"/suggestion/getInfoPage\", self.searchDTO).then(res => {\r\n            if (res.status === 200) {\r\n              self.tableData = res.data.list;\r\n              self.searchDTO.total = res.data.total;\r\n            }\r\n          })\r\n        }\r\n\r\n      },\r\n      //批量标记未已读\r\n      markToRead() {\r\n        if (this.selectionItems.length < 1) {\r\n          this.$message.warning(\"至少需要选择一条数据\")\r\n        } else {\r\n          this.$http.post(\"/suggestion/setInfoRead\", {\r\n            isRead: 1,\r\n            ids: this.selectionItems\r\n          }).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initDate();\r\n            }\r\n          })\r\n        }\r\n      },\r\n      //批量标记为未读\r\n      markToUnRead() {\r\n        if (this.selectionItems.length < 1) {\r\n          this.$message.warning(\"至少需要选择一条数据\")\r\n        } else {\r\n\r\n          this.$http.post(\"/suggestion/setInfoRead\", {\r\n            isRead: 0,\r\n            ids: this.selectionItems\r\n          }).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initDate();\r\n            }\r\n          })\r\n        }\r\n      },\r\n      //批量删除\r\n      deleteInfos() {\r\n        if (this.selectionItems.length < 1) {\r\n          this.$message.warning(\"至少需要选择一条数据\")\r\n        } else {\r\n          Message.confirm(\"是否需要删除这些通知？\").then(() => {\r\n            this.$http.post(\"/suggestion/deleteByIds\", this.selectionItems).then(res => {\r\n              if (res.status === 200) {\r\n                Message.success(\"删除成功\");\r\n                this.initDate();\r\n              }\r\n            })\r\n          })\r\n        }\r\n      },\r\n      //单条查看\r\n      showInfo(data) {\r\n        this.dialogTitle = \"查看健康建议\";\r\n        this.dialogVisible = true;\r\n        this.messageDTO = data;\r\n        this.isShow = true;\r\n        console.log(data)\r\n      },\r\n      deleteInfo(data) {\r\n        Message.confirm(\"是否需要删除此健康建议？\").then(() => {\r\n          let ids = [];\r\n          ids.push(data.id);\r\n          this.$http.post(\"/suggestion/deleteByIds\", ids).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"删除成功\");\r\n              this.initDate();\r\n            }\r\n          })\r\n        })\r\n      },\r\n      handleClose() {\r\n        this.dialogVisible = false;\r\n      },\r\n      getAllRole() {\r\n        this.$http.get(\"/role/all\").then(res => {\r\n          if (res.status === 200) {\r\n            this.roleOptions = res.data;\r\n          }\r\n        })\r\n      }\r\n\r\n    },\r\n    mounted() {\r\n      this.initDate();\r\n      this.getAllRole();\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  ::-webkit-scrollbar {\r\n    width: 5px;\r\n    height: 5px;\r\n    background-color: #F5F5F5;\r\n  }\r\n\r\n  /*定义滚动条轨道 内阴影+圆角*/\r\n  ::-webkit-scrollbar-track {\r\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\r\n    border-radius: 10px;\r\n    background-color: #F5F5F5;\r\n  }\r\n\r\n  /*定义滑块 内阴影+圆角*/\r\n  ::-webkit-scrollbar-thumb {\r\n    border-radius: 10px;\r\n    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);\r\n    background-color: #bdbdbd;\r\n  }\r\n\r\n  /*滑块效果*/\r\n  ::-webkit-scrollbar-thumb:hover {\r\n    border-radius: 5px;\r\n    -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\r\n    background: rgba(0, 0, 0, 0.4);\r\n  }\r\n\r\n  /*IE滚动条颜色*/\r\n  html {\r\n    scrollbar-face-color: #bfbfbf; /*滚动条颜色*/\r\n    scrollbar-highlight-color: #000;\r\n    scrollbar-3dlight-color: #000;\r\n    scrollbar-darkshadow-color: #000;\r\n    scrollbar-Shadow-color: #adadad; /*滑块边色*/\r\n    scrollbar-arrow-color: rgba(0, 0, 0, 0.4); /*箭头颜色*/\r\n    scrollbar-track-color: #eeeeee; /*背景颜色*/\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/views/suggest"}]}