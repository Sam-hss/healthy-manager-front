{"remainingRequest":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js!D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea_workspace\\healthy-manager-front\\src\\views\\system\\CategoryEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\idea_workspace\\healthy-manager-front\\src\\views\\system\\CategoryEdit.vue","mtime":1617034347104},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1616656090222},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1616656132299}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'CategoryEdit',\n  props: {\n    dialogFormVisible: Boolean,\n    data: [Object, Boolean],\n    title: String,\n    roleList: Array\n  },\n  data: function data() {\n    return {\n      props: {\n        value: 'id',\n        label: 'name',\n        children: 'children'\n      },\n      checkList: [],\n      checkAll: false,\n      isIndeterminate: true,\n      form: {\n        id: '',\n        name: '',\n        url: '',\n        icon: '',\n        type: '',\n        permission: '',\n        sort: '',\n        roleIds: []\n      },\n      elementIcon: ['iconfont icon-yonghuguanli', 'iconfont icon-jianyi', 'iconfont icon-gerendangan', 'iconfont icon-tubiaozhizuomoban', 'iconfont icon-ai-user', 'iconfont icon-xitongshezhi', 'iconfont icon-danganguanli', 'iconfont icon-navicon-jsgl', \"iconfont icon-quanxianguanli\"],\n      btnLoading: false,\n      options: [{\n        id: 0,\n        name: \"菜单\"\n      }, {\n        id: 1,\n        name: \"按钮\"\n      }]\n    };\n  },\n  watch: {\n    'data': {\n      handler: function handler() {\n        if (this.data) {\n          for (var k in this.form) {\n            this.form[k] = this.data[k];\n          }\n\n          this.getRoleList();\n        } else {\n          for (var _k in this.form) {\n            this.form[_k] = '';\n          }\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    btnCancel: function btnCancel() {\n      this.$emit('cancel');\n    },\n    btnOk: function btnOk() {\n      var _this = this;\n\n      var errorMsg = \"\";\n      var formData = this.form;\n      if (formData.name && formData.name.length <= 1) errorMsg = '分类名称必须大于1个字符';\n\n      if (errorMsg) {\n        this.$message.error(errorMsg);\n        return;\n      }\n\n      this.$emit('val-change', this.form);\n      this.btnLoading = true;\n      setTimeout(function () {\n        _this.btnLoading = false;\n      }, 1000);\n    },\n    handleCheckAllChange: function handleCheckAllChange(val) {\n      this.form.roleIds = val ? this.allRolesId : [];\n      this.isIndeterminate = false;\n    },\n    handleCheckedRolesChange: function handleCheckedRolesChange(value) {\n      var checkedCount = value.length;\n      this.checkAll = checkedCount === this.roleList.length;\n      this.isIndeterminate = checkedCount > 0 && checkedCount < this.roleList.length;\n    },\n    getRoleList: function getRoleList() {\n      var _this2 = this;\n\n      if (typeof this.form.id !== \"undefined\") {\n        this.$http.get(\"/roleResourceBind/getRoles/\" + this.form.id).then(function (res) {\n          if (res.status === 200) {\n            _this2.form.roleIds = res.data;\n          }\n        });\n      }\n    }\n  },\n  computed: {\n    allRolesId: function allRolesId() {\n      var ids = [];\n\n      for (var index in this.roleList) {\n        ids.push(this.roleList[index].id);\n      }\n\n      return ids;\n    }\n  }\n};",{"version":3,"sources":["CategoryEdit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"category-dialog\">\r\n    <el-dialog :title=\"title\" :visible=\"dialogFormVisible\" :show-close=\"false\" width=\"45%\" :modal=\"false\">\r\n      <div class=\"panel\">\r\n        <div class=\"panel-heading\">基础信息</div>\r\n        <div class=\"panel-body\">\r\n          <el-form :model=\"form\" label-width=\"10%\">\r\n            <el-row>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"类型\" label-width=\"20%\">\r\n                  <el-select size=\"small\" v-model=\"form.type\" placeholder=\"请选择\" :value=\"form.type\">\r\n                    <el-option v-for=\"item in options\" :label=\"item.name\" :value=\"item.id\" :key=\"item.id\"></el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"序号\" label-width=\"20%\">\r\n                  <el-input-number size=\"small\" v-model=\"form.sort\"></el-input-number>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-form-item label=\"名称\">\r\n              <el-input size=\"small\" v-model=\"form.name\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"路由\">\r\n              <el-input size=\"small\" v-model=\"form.url\" placeholder=\"请输入菜单路由\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"权限\">\r\n              <el-input size=\"small\" v-model=\"form.permission\" placeholder=\"请输入权限信息\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"图标\" v-show=\"form.type===0\">\r\n              <el-select size=\"small\" v-model=\"form.icon\" placeholder=\"请选择\" value=\"form.icon\">\r\n                <el-option\r\n                        v-for=\"item in elementIcon\"\r\n                        :key=\"item\"\r\n                        :label=\"item\"\r\n                        :value=\"item\">\r\n                  <span style=\"float: left\">{{ item }}</span>\r\n                  <span style=\"float: right; color: #8492a6; font-size: 13px\"><i style=\"font-size: 24px\"\r\n                                                                                 :class=\"item\"></i></span>\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n      <div class=\"panel\" v-if=\"form.id != null\">\r\n        <div class=\"panel-heading\">权限信息</div>\r\n        <el-form :model=\"form\">\r\n          <el-form-item label=\"角色权限：\">\r\n            <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选\r\n            </el-checkbox>\r\n            <div style=\"margin: 15px 0;\"></div>\r\n            <el-checkbox-group v-model=\"form.roleIds\" @change=\"handleCheckedRolesChange\">\r\n              <el-checkbox v-for=\"role in roleList\" :label=\"role.id\" :key=\"role.id\">{{role.roleName}}\r\n              </el-checkbox>\r\n            </el-checkbox-group>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"small\" @click=\"btnCancel\">取 消</el-button>\r\n        <el-button size=\"small\" type=\"success\" :loading=\"btnLoading\" @click=\"btnOk\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'CategoryEdit',\r\n    props: {\r\n      dialogFormVisible: Boolean,\r\n      data: [Object, Boolean],\r\n      title: String,\r\n      roleList: Array,\r\n    },\r\n    data() {\r\n      return {\r\n        props: {\r\n          value: 'id',\r\n          label: 'name',\r\n          children: 'children'\r\n        },\r\n        checkList: [],\r\n        checkAll: false,\r\n        isIndeterminate: true,\r\n        form: {\r\n          id: '',\r\n          name: '',\r\n          url: '',\r\n          icon: '',\r\n          type: '',\r\n          permission: '',\r\n          sort: '',\r\n          roleIds: []\r\n        },\r\n        elementIcon: [\r\n          'iconfont icon-yonghuguanli', 'iconfont icon-jianyi', 'iconfont icon-gerendangan', 'iconfont icon-tubiaozhizuomoban',\r\n          'iconfont icon-ai-user', 'iconfont icon-xitongshezhi', 'iconfont icon-danganguanli', 'iconfont icon-navicon-jsgl', \"iconfont icon-quanxianguanli\"\r\n        ],\r\n        btnLoading: false,\r\n        options: [\r\n          {\r\n            id: 0,\r\n            name: \"菜单\"\r\n          },\r\n          {\r\n            id: 1,\r\n            name: \"按钮\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    watch: {\r\n      'data': {\r\n        handler: function () {\r\n          if (this.data) {\r\n            for (let k in this.form) {\r\n              this.form[k] = this.data[k];\r\n            }\r\n            this.getRoleList();\r\n          } else {\r\n            for (let k in this.form) {\r\n              this.form[k] = '';\r\n            }\r\n          }\r\n        },\r\n        deep: true\r\n      }\r\n    },\r\n\r\n    methods: {\r\n      btnCancel() {\r\n        this.$emit('cancel');\r\n      },\r\n      btnOk() {\r\n        let errorMsg = \"\";\r\n        let formData = this.form;\r\n\r\n        if (formData.name && formData.name.length <= 1) errorMsg = '分类名称必须大于1个字符';\r\n\r\n        if (errorMsg) {\r\n          this.$message.error(errorMsg);\r\n          return;\r\n        }\r\n        this.$emit('val-change', this.form);\r\n        this.btnLoading = true;\r\n        setTimeout(() => {\r\n          this.btnLoading = false\r\n        }, 1000)\r\n      },\r\n      handleCheckAllChange(val) {\r\n        this.form.roleIds = val ? this.allRolesId : [];\r\n        this.isIndeterminate = false;\r\n      },\r\n      handleCheckedRolesChange(value) {\r\n        let checkedCount = value.length;\r\n        this.checkAll = checkedCount === this.roleList.length;\r\n        this.isIndeterminate = checkedCount > 0 && checkedCount < this.roleList.length;\r\n      },\r\n      getRoleList() {\r\n        if (typeof this.form.id !== \"undefined\") {\r\n          this.$http.get(\"/roleResourceBind/getRoles/\" + this.form.id).then(res => {\r\n            if (res.status === 200) {\r\n              this.form.roleIds = res.data;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      allRolesId: function () {\r\n        let ids = [];\r\n        for (let index in this.roleList) {\r\n          ids.push(this.roleList[index].id);\r\n        }\r\n        return ids;\r\n      }\r\n    },\r\n  }\r\n</script>\r\n<style lang=\"less\">\r\n  .category-dialog {\r\n    .el-cascader {\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  .panel {\r\n    margin: 0 10px;\r\n    background-color: #f5f5f5;\r\n\r\n    .panel-heading {\r\n      height: 31px;\r\n      background-color: #75afbd;\r\n      text-align: left;\r\n      color: white;\r\n      line-height: 31px;\r\n      text-indent: 11px;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .el-form-item {\r\n      padding: 0 10px;\r\n    }\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/views/system"}]}