{"remainingRequest":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js!D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea_workspace\\healthy-manager-front\\src\\views\\user\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\idea_workspace\\healthy-manager-front\\src\\views\\user\\Index.vue","mtime":1617034347120},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1616656090222},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1616656132299}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Message from '../../components/messages/index.js';\nimport ImageUpload from '../../components/upload/UploadBase64';\nexport default {\n  name: \"index\",\n  components: {\n    ImageUpload: ImageUpload\n  },\n  data: function data() {\n    var validateString = function validateString(rule, value, callback) {\n      value = value.split(\" \").join(\"\");\n\n      if (value === '') {\n        callback(new Error('请输入有效值'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      dialogVisible: false,\n      tableData: [],\n      rules: {\n        stuNo: [{\n          required: true,\n          message: '请输入学号',\n          trigger: 'blur'\n        }],\n        name: [{\n          required: true,\n          message: '请输入姓名',\n          trigger: 'blur'\n        }]\n      },\n      searchData: {\n        pageSize: 10,\n        pageNum: 1,\n        total: 0,\n        clauses: [{\n          column: \"college\",\n          operation: \"like\",\n          value: \"\"\n        }, {\n          column: \"major\",\n          operation: \"like\",\n          value: \"\"\n        }, {\n          column: \"name\",\n          operation: \"like\",\n          value: \"\"\n        }, {\n          column: \"stuNo\",\n          operation: \"like\",\n          value: \"\"\n        }, {\n          column: \"roleId\",\n          operation: \"=\",\n          value: \"\"\n        }]\n      },\n      userData: {},\n      disabled: true,\n      title: \"添加用户\",\n      roleOptions: [],\n      roleDisabled: false,\n      teacherOptions: []\n    };\n  },\n  methods: {\n    handleClose: function handleClose() {\n      this.dialogVisible = false;\n    },\n    initData: function initData() {\n      var _this = this;\n\n      var roleData = JSON.parse(localStorage.getItem(\"role\"));\n\n      if (roleData.roleName === '辅导员') {\n        this.searchData.clauses[4].value = 2;\n      }\n\n      this.$http.post(\"/user/page\", this.searchData).then(function (res) {\n        if (res.status === 200) {\n          _this.tableData = res.data.list;\n          _this.searchData.total = res.data.total;\n        }\n      });\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.searchData.pageSize = val;\n      this.initData();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.searchData.pageNum = val;\n      this.initData();\n    },\n    addUser: function addUser() {\n      this.userData = {};\n      var roleData = JSON.parse(localStorage.getItem(\"role\"));\n      var user = JSON.parse(localStorage.getItem(\"user\"));\n\n      if (roleData.roleName === '辅导员') {\n        this.userData.roleId = 2;\n        this.userData.teacherId = user.id;\n        this.roleDisabled = true;\n      } else {\n        this.roleDisabled = false;\n      }\n\n      this.title = \"添加用户\";\n      this.dialogVisible = true;\n      this.disabled = false;\n    },\n    showRow: function showRow(data) {\n      this.title = \"查看用户\";\n      this.disabled = true;\n      this.roleDisabled = true;\n      this.userData = data;\n      this.dialogVisible = true;\n    },\n    updateRow: function updateRow(index, data) {\n      var _this2 = this;\n\n      this.title = \"编辑用户\";\n      var roleData = JSON.parse(localStorage.getItem(\"role\"));\n\n      if (roleData.roleName === '辅导员') {\n        this.roleDisabled = true;\n      } else {\n        this.roleDisabled = false;\n      }\n\n      this.disabled = false;\n      this.$http.get(\"/user/get/\" + data[index].id).then(function (res) {\n        if (res.status === 200) {\n          _this2.userData = res.data;\n          _this2.dialogVisible = true;\n        }\n      });\n    },\n    deleteRow: function deleteRow(index, data) {\n      var _this3 = this;\n\n      Message.confirm(\"是否删除该用户?\").then(function () {\n        _this3.$http.get(\"/user/delete/\" + data[index].id).then(function (res) {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n\n            _this3.initData();\n          }\n        });\n      });\n    },\n    saveData: function saveData() {\n      var _this4 = this;\n\n      if (this.userData.id == null || this.userData.id === \"\") {\n        this.$http.post(\"/user/add\", this.userData).then(function (res) {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n\n            _this4.initData();\n          }\n        });\n      } else {\n        this.$http.post(\"/user/update\", this.userData).then(function (res) {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n\n            _this4.initData();\n          }\n        });\n      }\n\n      this.dialogVisible = false;\n    },\n    getAllRole: function getAllRole() {\n      var _this5 = this;\n\n      this.$http.get(\"/role/all\").then(function (res) {\n        if (res.status === 200) {\n          _this5.roleOptions = res.data;\n        }\n      });\n    },\n    getAllTeacher: function getAllTeacher() {\n      var _this6 = this;\n\n      this.$http.get(\"/user/getAllStudent/3\").then(function (res) {\n        if (res.status === 200) {\n          _this6.teacherOptions = res.data;\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.initData();\n    this.getAllRole();\n    this.getAllTeacher();\n  },\n  filters: {\n    RoleNameFilter: function RoleNameFilter(data) {\n      var res = JSON.parse(localStorage.getItem(\"roles\"));\n      console.log(res);\n\n      if (res[data - 1] != null) {\n        return res[data - 1].roleName;\n      }\n    }\n  }\n};",{"version":3,"sources":["Index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div style=\"display: flex;flex-direction: column;align-items: center\">\r\n    <div style=\"margin: 40px 0\"><h1>用户管理</h1></div>\r\n    <el-card style=\"width: 80%\">\r\n      <div style=\"width: 100%;display: flex;flex-direction: row;justify-content: space-around;margin-bottom: 20px\">\r\n        <div>\r\n          <el-input placeholder=\"根据学院筛选\" v-model=\"searchData.clauses[0].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <div>\r\n          <el-input placeholder=\"根据专业筛选\" v-model=\"searchData.clauses[1].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <div>\r\n          <el-input placeholder=\"根据姓名筛选\" v-model=\"searchData.clauses[2].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <div>\r\n          <el-input placeholder=\"根据学号筛选\" v-model=\"searchData.clauses[3].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" type=\"info\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"addUser\">添加用户</el-button>\r\n      </div>\r\n      <el-table\r\n              :data=\"tableData\"\r\n              style=\"width: 100%;margin-bottom: 20px\">\r\n        <el-table-column\r\n                type=\"index\"\r\n                width=\"50\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"updateDatetime\"\r\n                label=\"更新日期\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"name\"\r\n                label=\"姓名\"\r\n                align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                label=\"角色Id\"\r\n                align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{scope.row.roleId | RoleNameFilter}}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"stuNo\"\r\n                label=\"学号\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"college\"\r\n                align=\"center\"\r\n                label=\"学院\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"major\"\r\n                align=\"center\"\r\n                label=\"专业\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"grade\"\r\n                label=\"班级\"\r\n                align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                fixed=\"right\"\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"230\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n                    @click.native.prevent=\"showRow(scope.row)\"\r\n                    size=\"small\">\r\n              查看\r\n            </el-button>\r\n            <el-button\r\n                    @click.native.prevent=\"updateRow(scope.$index, tableData)\"\r\n                    size=\"small\">\r\n              编辑\r\n            </el-button>\r\n            <el-button\r\n                    @click.native.prevent=\"deleteRow(scope.$index, tableData)\"\r\n                    size=\"small\">\r\n              删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div>\r\n        <el-pagination\r\n                style=\"float: left;margin-bottom: 20px\"\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"searchData.pageNum\"\r\n                :page-sizes=\"[10, 15, 20, 30]\"\r\n                :page-size=\"searchData.pageSize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"searchData.total\">\r\n        </el-pagination>\r\n      </div>\r\n    </el-card>\r\n    <el-dialog :title=\"title\"\r\n               width=\"60%\"\r\n               :modal=\"false\"\r\n               :before-close=\"handleClose\"\r\n               :visible.sync=\"dialogVisible\">\r\n      <div style=\"width: 100%;display: flex;align-items: center;flex-direction: column\">\r\n        <el-form :model=\"userData\" :rules=\"rules\" ref=\"userData\" label-width=\"32%\" style=\"width: 90%;\"\r\n                 label-position=\"left\">\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"角色\" label-width=\"20%\">\r\n                <el-select :disabled=\"roleDisabled\" :value=\"userData.roleId\" v-model=\"userData.roleId\">\r\n                  <el-option v-for=\"item in roleOptions\" :key=\"item.id\" :label=\"item.roleName\"\r\n                             :value=\"item.id\"></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"辅导员\" label-width=\"20%\">\r\n                <el-select :disabled=\"roleDisabled\" :value=\"userData.teacherId\" v-model=\"userData.teacherId\">\r\n                  <el-option v-for=\"item in teacherOptions\" :key=\"item.id\" :label=\"item.name\"\r\n                             :value=\"item.id\"></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n\r\n          <el-alert title=\"学生基本信息\"\r\n                    type=\"success\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-row>\r\n            <el-col :span=\"18\">\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"学院\" prop=\"college\">\r\n                    <el-input :disabled=\"disabled\" v-model=\"userData.college\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"专业\" prop=\"major\">\r\n                    <el-input :disabled=\"disabled\" v-model=\"userData.major\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"班级\" prop=\"grade\">\r\n                    <el-input :disabled=\"disabled\" v-model=\"userData.grade\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"学号\" prop=\"stuNo\">\r\n                    <el-input :disabled=\"disabled\" v-model=\"userData.stuNo\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"姓名\" prop=\"name\">\r\n                    <el-input v-model=\"userData.name\" :disabled=\"disabled\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"性别\" prop=\"sex\">\r\n                    <el-radio :disabled=\"disabled\" label=\"男\" v-model=\"userData.sex\"></el-radio>\r\n                    <el-radio :disabled=\"disabled\" label=\"女\" v-model=\"userData.sex\"></el-radio>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"出生\" prop=\"birth\">\r\n                    <el-date-picker v-model=\"userData.birth\" :disabled=\"disabled\"></el-date-picker>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"实际年龄\" prop=\"realAge\">\r\n                    <el-input type=\"number\" v-model=\"userData.realAge\" :disabled=\"disabled\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"文化程度\" prop=\"cultureLevel\">\r\n                    <el-input v-model=\"userData.cultureLevel\" :disabled=\"disabled\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"名族\" prop=\"nation\">\r\n                    <el-input v-model=\"userData.nation\" :disabled=\"disabled\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"职业\" prop=\"occupation\">\r\n                    <el-input v-model=\"userData.occupation\" :disabled=\"disabled\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"籍贯\" prop=\"nativePlace\">\r\n                    <el-input v-model=\"userData.nativePlace\" :disabled=\"disabled\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label-width=\"5%\">\r\n                <image-upload v-model=\"userData.photo\"></image-upload>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"现家庭住址\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" :disabled=\"disabled\" v-model=\"userData.presentAddress\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"毕业学校或工作单位\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" :disabled=\"disabled\" v-model=\"userData.workPlace\"></el-input>\r\n          </el-form-item>\r\n          <template>\r\n            <el-form-item>\r\n              <el-button type=\"success\" @click=\"disabled=false\">编辑</el-button>\r\n              <el-button :disabled=\"disabled\" type=\"primary\" @click=\"saveData\">保存</el-button>\r\n              <el-button @click=\"handleClose\">取消</el-button>\r\n            </el-form-item>\r\n          </template>\r\n        </el-form>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Message from '../../components/messages/index.js'\r\n  import ImageUpload from '../../components/upload/UploadBase64'\r\n\r\n  export default {\r\n    name: \"index\",\r\n    components: {ImageUpload},\r\n    data() {\r\n      const validateString = (rule, value, callback) => {\r\n        value = value.split(\" \").join(\"\");\r\n        if (value === '') {\r\n          callback(new Error('请输入有效值'));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      return {\r\n        dialogVisible: false,\r\n        tableData: [],\r\n        rules: {\r\n          stuNo: [\r\n            {required: true, message: '请输入学号', trigger: 'blur'}\r\n          ],\r\n          name: [\r\n            {required: true, message: '请输入姓名', trigger: 'blur'}\r\n          ],\r\n\r\n        },\r\n        searchData: {\r\n          pageSize: 10,\r\n          pageNum: 1,\r\n          total: 0,\r\n          clauses: [{\r\n            column: \"college\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }, {\r\n            column: \"major\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }, {\r\n            column: \"name\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }, {\r\n            column: \"stuNo\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }, {\r\n            column: \"roleId\",\r\n            operation: \"=\",\r\n            value: \"\"\r\n          },]\r\n        },\r\n        userData: {},\r\n        disabled: true,\r\n        title: \"添加用户\",\r\n        roleOptions: [],\r\n        roleDisabled: false,\r\n        teacherOptions: []\r\n      }\r\n    },\r\n    methods: {\r\n      handleClose() {\r\n        this.dialogVisible = false;\r\n      },\r\n      initData() {\r\n        let roleData = JSON.parse(localStorage.getItem(\"role\"));\r\n        if (roleData.roleName === '辅导员') {\r\n          this.searchData.clauses[4].value = 2\r\n        }\r\n        this.$http.post(\"/user/page\", this.searchData).then(res => {\r\n          if (res.status === 200) {\r\n            this.tableData = res.data.list;\r\n            this.searchData.total = res.data.total;\r\n          }\r\n        })\r\n      },\r\n      handleSizeChange(val) {\r\n        this.searchData.pageSize = val;\r\n        this.initData();\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.searchData.pageNum = val;\r\n        this.initData();\r\n      },\r\n      addUser() {\r\n        this.userData = {};\r\n        let roleData = JSON.parse(localStorage.getItem(\"role\"));\r\n        let user = JSON.parse(localStorage.getItem(\"user\"));\r\n        if (roleData.roleName === '辅导员') {\r\n          this.userData.roleId = 2;\r\n          this.userData.teacherId = user.id;\r\n          this.roleDisabled = true;\r\n        } else {\r\n          this.roleDisabled = false;\r\n        }\r\n        this.title = \"添加用户\";\r\n        this.dialogVisible = true;\r\n        this.disabled = false;\r\n      },\r\n      showRow(data) {\r\n        this.title = \"查看用户\";\r\n        this.disabled = true;\r\n        this.roleDisabled = true;\r\n        this.userData = data;\r\n        this.dialogVisible = true;\r\n      },\r\n      updateRow(index, data) {\r\n        this.title = \"编辑用户\";\r\n        let roleData = JSON.parse(localStorage.getItem(\"role\"));\r\n        if (roleData.roleName === '辅导员') {\r\n          this.roleDisabled = true;\r\n        } else {\r\n          this.roleDisabled = false;\r\n        }\r\n        this.disabled = false;\r\n        this.$http.get(\"/user/get/\" + data[index].id).then(res => {\r\n          if (res.status === 200) {\r\n            this.userData = res.data;\r\n            this.dialogVisible = true;\r\n          }\r\n        })\r\n      },\r\n      deleteRow(index, data) {\r\n        Message.confirm(\"是否删除该用户?\").then(() => {\r\n          this.$http.get(\"/user/delete/\" + data[index].id).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        })\r\n      },\r\n      saveData() {\r\n        if (this.userData.id == null || this.userData.id === \"\") {\r\n          this.$http.post(\"/user/add\", this.userData).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        } else {\r\n          this.$http.post(\"/user/update\", this.userData).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        }\r\n        this.dialogVisible = false;\r\n      },\r\n      getAllRole() {\r\n        this.$http.get(\"/role/all\").then(res => {\r\n          if (res.status === 200) {\r\n            this.roleOptions = res.data;\r\n          }\r\n        })\r\n      },\r\n      getAllTeacher() {\r\n        this.$http.get(\"/user/getAllStudent/3\").then(res => {\r\n          if (res.status === 200) {\r\n            this.teacherOptions = res.data;\r\n          }\r\n        })\r\n      }\r\n    },\r\n    mounted() {\r\n      this.initData();\r\n      this.getAllRole();\r\n      this.getAllTeacher();\r\n    },\r\n    filters: {\r\n      RoleNameFilter: (data) => {\r\n        let res = JSON.parse(localStorage.getItem(\"roles\"));\r\n        console.log(res);\r\n        if (res[data - 1] != null) {\r\n          return res[data - 1].roleName\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .el-date-editor.el-input, .el-date-editor.el-input__inner {\r\n    width: 150px;\r\n  }\r\n\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 241px;\r\n    line-height: 241px;\r\n    text-align: center;\r\n    border: 1px solid #8c939d;\r\n  }\r\n\r\n  .avatar {\r\n    width: 178px;\r\n    height: 241px;;\r\n    display: block;\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/views/user"}]}