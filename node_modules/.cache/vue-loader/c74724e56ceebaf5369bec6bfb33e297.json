{"remainingRequest":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea_workspace\\healthy-manager-front\\src\\views\\health\\SelfHealthList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\idea_workspace\\healthy-manager-front\\src\\views\\health\\SelfHealthList.vue","mtime":1617034347104},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1616656090222},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1616656132299}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Message from '../../components/messages/index.js'\nimport HealthTable from './HeallthTable'\nimport ImageUpload from '../../components/upload/UploadBase64'\n\nexport default {\n  name: \"index\",\n\n  data() {\n    /*const validateString = (rule, value, callback) => {\n      value = value.split(\" \").join(\"\");\n      if (value === '') {\n        callback(new Error('请输入有效值'));\n      } else {\n        callback();\n      }\n    };*/\n    return {\n      dialogShowVisible: false,\n      dialogVisible: false,\n      tableData: [],\n      searchData: {\n        pageSize: 10,\n        pageNum: 1,\n        total: 0,\n        clauses: [\n          {\n            column: \"userId\",\n            operation: \"=\",\n            value: \"\"\n          }]\n      },\n      checkInfoData: {},\n      disable: true,\n      title: \"添加用户\",\n      userOptions: [],\n      /*rules: {\n        checkTime: [\n          {required: true, message: '请选择体检日期', trigger: 'blur'}\n        ],\n        checkYear: [\n          {required: true, message: '请选择学年', trigger: 'blur'}\n        ],\n        userId: [\n          {required: true, message: '请选择学生', trigger: 'blur'}\n        ],\n        college: [\n          {required: true, message: '请输入学院', trigger: 'blur'}\n        ],\n        major: [\n          {required: true, message: '请输入专业', trigger: 'blur'}\n        ],\n        grade: [\n          {required: true, message: '请输入班级', trigger: 'blur'}\n        ],\n        /!*stuNo: [\n          {required: true, message: '请输入学号', trigger: 'blur'}\n        ],*!/\n        name: [\n          {required: true, message: '请输入姓名', trigger: 'blur'}\n        ],\n      },*/\n      checkDataOptions: [\n        {label: \"第一学年\"}, {label: \"第二学年\"}, {label: \"第三学年\"}, {label: \"第四学年\"}\n      ],\n      user: JSON.parse(localStorage.getItem(\"user\"))\n    }\n  },\n  components: {HealthTable, ImageUpload},\n  methods: {\n    change(e) {\n      this.$forceUpdate()\n    },\n    handleClose() {\n      this.dialogVisible = false;\n      this.dialogShowVisible = false;\n    },\n    initData() {\n      this.searchData.clauses[0].value = this.user.id;\n      this.$http.post(\"/checkInfo/page\", this.searchData).then(res => {\n        if (res.status === 200) {\n          this.tableData = res.data.list;\n          this.searchData.total = res.data.total;\n        }\n      })\n    },\n    handleSizeChange(val) {\n      this.searchData.pageSize = val;\n      this.initData();\n    },\n    handleCurrentChange(val) {\n      this.searchData.pageNum = val;\n      this.initData();\n    },\n    addUser() {\n      this.title = \"添加健康档案\";\n      this.checkInfoData = {};\n      this.checkInfoData.college = this.user.college;\n      this.checkInfoData.major = this.user.major;\n      this.checkInfoData.grade = this.user.grade;\n      this.checkInfoData.stuNo = this.user.stuNo;\n      this.checkInfoData.name = this.user.name;\n      this.checkInfoData.sex = this.user.sex;\n      this.checkInfoData.birth = this.user.birth;\n      this.checkInfoData.realAge = this.user.realAge;\n      this.checkInfoData.cultureLevel = this.user.cultureLevel;\n      this.checkInfoData.nation = this.user.nation;\n      this.checkInfoData.occupation = this.user.occupation;\n      this.checkInfoData.nativePlace = this.user.nativePlace;\n      this.checkInfoData.presentAddress = this.user.presentAddress;\n      this.checkInfoData.workPlace = this.user.workPlace;\n      this.checkInfoData.teacherId = this.user.teacherId;\n      this.checkInfoData.photo = this.user.photo;\n      this.dialogVisible = true;\n      this.disable = false;\n    },\n    showRow(data) {\n      this.disable = true;\n      this.checkInfoData = data;\n      this.dialogShowVisible = true;\n    },\n    updateRow(index, data) {\n      this.title = \"编辑健康档案\";\n      this.disable = false;\n      this.$http.get(\"/checkInfo/get/\" + data[index].id).then(res => {\n        if (res.status === 200) {\n          this.checkInfoData = res.data;\n          this.dialogVisible = true;\n        }\n      })\n    },\n    deleteRow(index, data) {\n      Message.confirm(\"是否删除该档案?\").then(() => {\n        this.$http.get(\"/checkInfo/delete/\" + data[index].id).then(res => {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n            this.initData();\n          }\n        })\n      })\n    },\n    saveData() {\n      if (this.checkInfoData.id == null || this.checkInfoData.id === \"\") {\n        this.checkInfoData.userId = this.user.id;\n        this.$http.post(\"/checkInfo/add\", this.checkInfoData).then(res => {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n            this.initData();\n          }\n        })\n      } else {\n        this.$http.post(\"/checkInfo/update\", this.checkInfoData).then(res => {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n            this.initData();\n          }\n        })\n      }\n      this.dialogVisible = false;\n    },\n    getAllUser() {\n      this.$http.get(\"/user/getAllStudent/2\").then(res => {\n        if (res.status === 200) {\n          this.userOptions = res.data;\n        }\n      })\n    },\n    judgeCheckIsExist() {\n      if (this.checkInfoData.checkYear === \"\" || this.checkInfoData.checkYear == null) {\n        this.$message.warning(\"请选择需要学年\")\n      } else {\n        this.$http.get(\"/checkInfo/judgeCheckIsExist\", {\n          params: {\n            \"userId\": this.user.id,\n            \"checkYear\": this.checkInfoData.checkYear\n          }\n        }).then(res => {\n          if (res.status === 200) {\n            if (res.data === false) {\n              this.$message.error(\"该学生此学年体检单已存在，请重新选择学年!\")\n            }\n          }\n        })\n      }\n    },\n    saveSuggestion(data) {\n      this.$http.post(\"/suggestion/add\", data).then(res => {\n        if (res.status === 200) {\n          this.$message.success(\"留言成功\");\n          this.dialogShowVisible = false;\n        }\n      })\n    }\n  },\n  mounted() {\n    this.initData();\n    this.getAllUser();\n  }\n}\n",{"version":3,"sources":["SelfHealthList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAugBA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SelfHealthList.vue","sourceRoot":"src/views/health","sourcesContent":["<template>\r\n  <div style=\"display: flex;flex-direction: column;align-items: center\">\r\n    <div style=\"margin: 40px 0\"><h1>我的健康档案</h1></div>\r\n    <el-card style=\"width: 80%\">\r\n      <div style=\"width: 100%;display: flex;flex-direction: row;justify-content: space-around;margin-bottom: 20px\">\r\n        <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"addUser\">添加健康档案</el-button>\r\n      </div>\r\n      <el-table\r\n              :data=\"tableData\"\r\n              style=\"width: 100%;margin-bottom: 20px\">\r\n        <el-table-column\r\n                type=\"index\"\r\n                width=\"50\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"checkYear\"\r\n                label=\"学年\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"name\"\r\n                label=\"姓名\"\r\n                align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"stuNo\"\r\n                label=\"学号\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"college\"\r\n                align=\"center\"\r\n                label=\"学院\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"major\"\r\n                align=\"center\"\r\n                label=\"专业\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"grade\"\r\n                label=\"班级\"\r\n                align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                fixed=\"right\"\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"230\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n                    @click.native.prevent=\"showRow(scope.row)\"\r\n                    size=\"small\">\r\n              查看\r\n            </el-button>\r\n            <el-button\r\n                    @click.native.prevent=\"updateRow(scope.$index, tableData)\"\r\n                    size=\"small\">\r\n              编辑\r\n            </el-button>\r\n            <el-button\r\n                    @click.native.prevent=\"deleteRow(scope.$index, tableData)\"\r\n                    size=\"small\">\r\n              删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div>\r\n        <el-pagination\r\n                style=\"float: left;margin-bottom: 20px\"\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"searchData.pageNum\"\r\n                :page-sizes=\"[10, 15, 20, 30]\"\r\n                :page-size=\"searchData.pageSize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"searchData.total\">\r\n        </el-pagination>\r\n      </div>\r\n    </el-card>\r\n    <el-dialog :title=\"title\"\r\n               width=\"80%\"\r\n               :modal=\"false\"\r\n               :before-close=\"handleClose\"\r\n               :visible.sync=\"dialogVisible\">\r\n      <div style=\"width: 100%;display: flex;align-items: center;flex-direction: column\">\r\n        <el-form :model=\"checkInfoData\"\r\n                 ref=\"checkInfoData\"\r\n                 label-width=\"25%\"\r\n                 style=\"width: 90%;\"\r\n                 label-position=\"left\">\r\n<!--          :rules=\"rules\"-->\r\n          <el-row>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"选择学年\" prop=\"checkYear\">\r\n                <el-select v-model=\"checkInfoData.checkYear\" :disabled=\"disable\" :value=\"checkInfoData.checkYear\"\r\n                           @change=\"judgeCheckIsExist\">\r\n                  <el-option v-for=\"item in checkDataOptions\" :key=\"item.label\" :label=\"item.label\"\r\n                             :value=\"item.label\"></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"体检日期\" prop=\"checkTime\">\r\n                <el-date-picker v-model=\"checkInfoData.checkTime\" :disabled=\"disable\"></el-date-picker>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-alert title=\"学生基本信息\"\r\n                    type=\"success\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-row>\r\n            <el-col :span=\"18\">\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"学院\" prop=\"college\">\r\n                    <el-input :disabled=\"disable\" v-model=\"checkInfoData.college\" autocomplete=\"off\"\r\n                              @input=\"change($event)\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"专业\" prop=\"major\">\r\n                    <el-input :disabled=\"disable\" v-model=\"checkInfoData.major\" autocomplete=\"off\"\r\n                              @input=\"change($event)\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"班级\" prop=\"grade\">\r\n                    <el-input :disabled=\"disable\" v-model=\"checkInfoData.grade\" autocomplete=\"off\"\r\n                              @input=\"change($event)\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"学号\" prop=\"stuNo\">\r\n                    <el-input :disabled=\"true\" v-model=\"checkInfoData.stuNo\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"姓名\" prop=\"name\">\r\n                    <el-input v-model=\"checkInfoData.name\" :disabled=\"disable\" autocomplete=\"off\"\r\n                              @input=\"change($event)\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"性别\" prop=\"sex\">\r\n                    <el-radio :disabled=\"disable\" label=\"男\" v-model=\"checkInfoData.sex\" @input=\"change($event)\"></el-radio>\r\n                    <el-radio :disabled=\"disable\" label=\"女\" v-model=\"checkInfoData.sex\" @input=\"change($event)\"></el-radio>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"出生\" prop=\"birth\">\r\n                    <el-date-picker v-model=\"checkInfoData.birth\" :disabled=\"disable\" @input=\"change($event)\"></el-date-picker>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"实际年龄\" prop=\"realAge\">\r\n                    <el-input type=\"number\" v-model=\"checkInfoData.realAge\" :disabled=\"disable\" @input=\"change($event)\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"文化程度\" prop=\"cultureLevel\">\r\n                    <el-input v-model=\"checkInfoData.cultureLevel\" :disabled=\"disable\" @input=\"change($event)\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"民族\" prop=\"nation\">\r\n                    <el-input v-model=\"checkInfoData.nation\" :disabled=\"disable\" @input=\"change($event)\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"职业\" prop=\"occupation\">\r\n                    <el-input v-model=\"checkInfoData.occupation\" :disabled=\"disable\" @input=\"change($event)\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"籍贯\" prop=\"nativePlace\">\r\n                    <el-input v-model=\"checkInfoData.nativePlace\" :disabled=\"disable\" @input=\"change($event)\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label=\"照片\">\r\n                <image-upload v-model=\"checkInfoData.photo\"></image-upload>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n\r\n          <el-form-item label=\"现家庭住址\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" :disabled=\"disable\" v-model=\"checkInfoData.presentAddress\" @input=\"change($event)\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"毕业学校或工作单位\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" :disabled=\"disable\" v-model=\"checkInfoData.workPlace\" @input=\"change($event)\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"既往医史\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" :disabled=\"disable\" v-model=\"checkInfoData.historyCheck\" @input=\"change($event)\"></el-input>\r\n          </el-form-item>\r\n\r\n\r\n          <el-alert title=\"五官科检查信息--眼科\"\r\n                    type=\"warning\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-row>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label=\"视力-左\" prop=\"leftView\">\r\n                <el-input :disabled=\"!disable\" type=\"number\" v-model=\"checkInfoData.leftView\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label=\"视力-右\" prop=\"rightView\">\r\n                <el-input :disabled=\"!disable\" type=\"number\" v-model=\"checkInfoData.rightView\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label=\"矫正视力-左\" label-width=\"30%\" prop=\"correctLeftView\">\r\n                <el-input :disabled=\"!disable\" type=\"number\" v-model=\"checkInfoData.correctLeftView\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label=\"矫正视力-右\" label-width=\"30%\" prop=\"correctRightView\">\r\n                <el-input :disabled=\"!disable\" type=\"number\" v-model=\"checkInfoData.correctRightView\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"其他眼疾\" label-width=\"10%\">\r\n            <el-input :disabled=\"!disable\" v-model=\"checkInfoData.otherEyesSick\"></el-input>\r\n          </el-form-item>\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"色觉检查-彩色图案及编码\" label-width=\"30%\">\r\n                <el-input :disabled=\"!disable\" v-model=\"checkInfoData.colorOrCode\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"色觉检查-单色识别\" label-width=\"30%\">\r\n                <el-input :disabled=\"!disable\" v-model=\"checkInfoData.singleColorJudge\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"医师签字\" label-width=\"10%\">\r\n            <el-input :disabled=\"!disable\" v-model=\"checkInfoData.signForEyes\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-alert title=\"五官科检查信息--耳喉鼻科\"\r\n                    type=\"warning\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"听力-左\" prop=\"leftAudition\">\r\n                <el-input :disabled=\"!disable\" type=\"number\" v-model=\"checkInfoData.leftAudition\">\r\n                  <template slot=\"append\">公尺</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"听力-右\" prop=\"rightAudition\">\r\n                <el-input :disabled=\"!disable\" type=\"number\" v-model=\"checkInfoData.rightAudition\">\r\n                  <template slot=\"append\">公尺</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"耳疾\" label-width=\"10%\">\r\n            <el-input :disabled=\"!disable\" v-model=\"checkInfoData.earSick\"></el-input>\r\n          </el-form-item>\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"嗅觉\">\r\n                <el-input :disabled=\"!disable\" v-model=\"checkInfoData.smell\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"鼻及鼻窦疾病\">\r\n                <el-input :disabled=\"!disable\" v-model=\"checkInfoData.paranasalSinus\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"咽喉\">\r\n                <el-input :disabled=\"!disable\" v-model=\"checkInfoData.throat\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"口吃\">\r\n                <el-input :disabled=\"!disable\" v-model=\"checkInfoData.stammer\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"医师签字\" label-width=\"10%\">\r\n            <el-input :disabled=\"!disable\" v-model=\"checkInfoData.signForEar\"></el-input>\r\n          </el-form-item>\r\n\r\n\r\n          <el-alert title=\"五官科检查信息--口腔科\"\r\n                    type=\"warning\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-row>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"龋  齿\">\r\n                <el-input :disabled=\"!disable\" v-model=\"checkInfoData.toothSick\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"缺  齿\">\r\n                <el-input :disabled=\"!disable\" v-model=\"checkInfoData.hypodontia\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"齿  槽\">\r\n                <el-input :disabled=\"!disable\" v-model=\"checkInfoData.toothPlace\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"其他\" label-width=\"10%\">\r\n            <el-input :disabled=\"!disable\" v-model=\"checkInfoData.otherSenseSick\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"医师签字\" label-width=\"10%\">\r\n            <el-input :disabled=\"!disable\" v-model=\"checkInfoData.signForMouth\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-alert title=\"外科检查信息\"\r\n                    type=\"info\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-row>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label=\"身长\">\r\n                <el-input v-model=\"checkInfoData.height\" type=\"number\" :disabled=\"!disable\">\r\n                  <template slot=\"append\">公分</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label=\"体重\">\r\n                <el-input v-model=\"checkInfoData.weight\" type=\"number\" :disabled=\"!disable\">\r\n                  <template slot=\"append\">公斤</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label=\"腰围\">\r\n                <el-input v-model=\"checkInfoData.waistline\" type=\"number\" :disabled=\"!disable\">\r\n                  <template slot=\"append\">公分</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label=\"皮肤\">\r\n                <el-input v-model=\"checkInfoData.skin\" :disabled=\"!disable\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"淋巴\">\r\n                <el-input v-model=\"checkInfoData.lymph\" :disabled=\"!disable\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"甲状腺\">\r\n                <el-input v-model=\"checkInfoData.glandulaThyroidea\" :disabled=\"!disable\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"脊  柱\">\r\n                <el-input v-model=\"checkInfoData.spineBackbone\" :disabled=\"!disable\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"四肢\">\r\n                <el-input v-model=\"checkInfoData.allLegs\" :disabled=\"!disable\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"关  节\">\r\n                <el-input v-model=\"checkInfoData.arthrosis\" :disabled=\"!disable\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-form-item label=\"平  足\">\r\n                <el-input v-model=\"checkInfoData.foot\" :disabled=\"!disable\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"其他\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.otherSurgerySick\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"血压\">\r\n                <el-input :disabled=\"!disable\" type=\"number\" v-model=\"checkInfoData.bloodPressure\">\r\n                  <template slot=\"append\">mmHg</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"脉搏\">\r\n                <el-input :disabled=\"!disable\" type=\"number\" v-model=\"checkInfoData.pulse\">\r\n                  <template slot=\"append\">次/秒</template>\r\n                </el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"医师签字\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.signForSurgery\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n\r\n\r\n          <el-alert title=\"内科检查信息\"\r\n                    type=\"info\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-form-item label=\"发育营养\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.growth\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"神经及精神\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.mind\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"肺及呼吸道\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.lung\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"心脏及血管\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.heart\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"腹部器官-肝\" label-width=\"20%\">\r\n                <el-input v-model=\"checkInfoData.liver\" :disabled=\"!disable\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"腹部器官-脾\" label-width=\"20%\">\r\n                <el-input v-model=\"checkInfoData.spleen\" :disabled=\"!disable\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"其他\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.otherInternalSick\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"医师签字\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.signForInternal\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n\r\n\r\n          <el-alert title=\"化验检查信息\"\r\n                    type=\"success\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-form-item label=\"化验检查\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" v-model=\"checkInfoData.assayCheck\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"化验员签字\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.signForAssay\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-alert title=\"化验胸部放射检查信息\"\r\n                    type=\"success\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-form-item label=\"化验胸部放射检查\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" v-model=\"checkInfoData.chestCheck\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"医师签字\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.signForChest\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n\r\n          <el-alert title=\"其他检查信息\"\r\n                    type=\"success\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-form-item label=\"其他检查\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" v-model=\"checkInfoData.otherCheck\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"检查结论\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" v-model=\"checkInfoData.checkResult\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"负责医师签字\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.signForResult\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"检查医院意见\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.suggestForCheck\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"盖章\" label-width=\"10%\">\r\n            <el-input v-model=\"checkInfoData.sealer\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"备注\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" v-model=\"checkInfoData.remark\" :disabled=\"!disable\"></el-input>\r\n          </el-form-item>\r\n\r\n          <template>\r\n            <el-form-item align=\"right\" v-show=\"!disable\">\r\n              <el-button type=\"success\" @click=\"disable=false\">编辑</el-button>\r\n              <el-button :disabled=\"disable\" type=\"primary\" @click=\"saveData(checkInfoData)\">保存</el-button>\r\n              <el-button @click=\"handleClose\">取消</el-button>\r\n            </el-form-item>\r\n          </template>\r\n        </el-form>\r\n      </div>\r\n\r\n    </el-dialog>\r\n    <el-dialog title=\"查看学生健康档案\"\r\n               width=\"80%\"\r\n               :modal=\"false\"\r\n               :before-close=\"handleClose\"\r\n               :visible.sync=\"dialogShowVisible\">\r\n      <health-table :health-data=\"checkInfoData\" :is-msg=\"false\" :disabled=\"disable\"\r\n                    @save-suggestion=\"saveSuggestion\"></health-table>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Message from '../../components/messages/index.js'\r\n  import HealthTable from './HeallthTable'\r\n  import ImageUpload from '../../components/upload/UploadBase64'\r\n\r\n  export default {\r\n    name: \"index\",\r\n\r\n    data() {\r\n      /*const validateString = (rule, value, callback) => {\r\n        value = value.split(\" \").join(\"\");\r\n        if (value === '') {\r\n          callback(new Error('请输入有效值'));\r\n        } else {\r\n          callback();\r\n        }\r\n      };*/\r\n      return {\r\n        dialogShowVisible: false,\r\n        dialogVisible: false,\r\n        tableData: [],\r\n        searchData: {\r\n          pageSize: 10,\r\n          pageNum: 1,\r\n          total: 0,\r\n          clauses: [\r\n            {\r\n              column: \"userId\",\r\n              operation: \"=\",\r\n              value: \"\"\r\n            }]\r\n        },\r\n        checkInfoData: {},\r\n        disable: true,\r\n        title: \"添加用户\",\r\n        userOptions: [],\r\n        /*rules: {\r\n          checkTime: [\r\n            {required: true, message: '请选择体检日期', trigger: 'blur'}\r\n          ],\r\n          checkYear: [\r\n            {required: true, message: '请选择学年', trigger: 'blur'}\r\n          ],\r\n          userId: [\r\n            {required: true, message: '请选择学生', trigger: 'blur'}\r\n          ],\r\n          college: [\r\n            {required: true, message: '请输入学院', trigger: 'blur'}\r\n          ],\r\n          major: [\r\n            {required: true, message: '请输入专业', trigger: 'blur'}\r\n          ],\r\n          grade: [\r\n            {required: true, message: '请输入班级', trigger: 'blur'}\r\n          ],\r\n          /!*stuNo: [\r\n            {required: true, message: '请输入学号', trigger: 'blur'}\r\n          ],*!/\r\n          name: [\r\n            {required: true, message: '请输入姓名', trigger: 'blur'}\r\n          ],\r\n        },*/\r\n        checkDataOptions: [\r\n          {label: \"第一学年\"}, {label: \"第二学年\"}, {label: \"第三学年\"}, {label: \"第四学年\"}\r\n        ],\r\n        user: JSON.parse(localStorage.getItem(\"user\"))\r\n      }\r\n    },\r\n    components: {HealthTable, ImageUpload},\r\n    methods: {\r\n      change(e) {\r\n        this.$forceUpdate()\r\n      },\r\n      handleClose() {\r\n        this.dialogVisible = false;\r\n        this.dialogShowVisible = false;\r\n      },\r\n      initData() {\r\n        this.searchData.clauses[0].value = this.user.id;\r\n        this.$http.post(\"/checkInfo/page\", this.searchData).then(res => {\r\n          if (res.status === 200) {\r\n            this.tableData = res.data.list;\r\n            this.searchData.total = res.data.total;\r\n          }\r\n        })\r\n      },\r\n      handleSizeChange(val) {\r\n        this.searchData.pageSize = val;\r\n        this.initData();\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.searchData.pageNum = val;\r\n        this.initData();\r\n      },\r\n      addUser() {\r\n        this.title = \"添加健康档案\";\r\n        this.checkInfoData = {};\r\n        this.checkInfoData.college = this.user.college;\r\n        this.checkInfoData.major = this.user.major;\r\n        this.checkInfoData.grade = this.user.grade;\r\n        this.checkInfoData.stuNo = this.user.stuNo;\r\n        this.checkInfoData.name = this.user.name;\r\n        this.checkInfoData.sex = this.user.sex;\r\n        this.checkInfoData.birth = this.user.birth;\r\n        this.checkInfoData.realAge = this.user.realAge;\r\n        this.checkInfoData.cultureLevel = this.user.cultureLevel;\r\n        this.checkInfoData.nation = this.user.nation;\r\n        this.checkInfoData.occupation = this.user.occupation;\r\n        this.checkInfoData.nativePlace = this.user.nativePlace;\r\n        this.checkInfoData.presentAddress = this.user.presentAddress;\r\n        this.checkInfoData.workPlace = this.user.workPlace;\r\n        this.checkInfoData.teacherId = this.user.teacherId;\r\n        this.checkInfoData.photo = this.user.photo;\r\n        this.dialogVisible = true;\r\n        this.disable = false;\r\n      },\r\n      showRow(data) {\r\n        this.disable = true;\r\n        this.checkInfoData = data;\r\n        this.dialogShowVisible = true;\r\n      },\r\n      updateRow(index, data) {\r\n        this.title = \"编辑健康档案\";\r\n        this.disable = false;\r\n        this.$http.get(\"/checkInfo/get/\" + data[index].id).then(res => {\r\n          if (res.status === 200) {\r\n            this.checkInfoData = res.data;\r\n            this.dialogVisible = true;\r\n          }\r\n        })\r\n      },\r\n      deleteRow(index, data) {\r\n        Message.confirm(\"是否删除该档案?\").then(() => {\r\n          this.$http.get(\"/checkInfo/delete/\" + data[index].id).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        })\r\n      },\r\n      saveData() {\r\n        if (this.checkInfoData.id == null || this.checkInfoData.id === \"\") {\r\n          this.checkInfoData.userId = this.user.id;\r\n          this.$http.post(\"/checkInfo/add\", this.checkInfoData).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        } else {\r\n          this.$http.post(\"/checkInfo/update\", this.checkInfoData).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        }\r\n        this.dialogVisible = false;\r\n      },\r\n      getAllUser() {\r\n        this.$http.get(\"/user/getAllStudent/2\").then(res => {\r\n          if (res.status === 200) {\r\n            this.userOptions = res.data;\r\n          }\r\n        })\r\n      },\r\n      judgeCheckIsExist() {\r\n        if (this.checkInfoData.checkYear === \"\" || this.checkInfoData.checkYear == null) {\r\n          this.$message.warning(\"请选择需要学年\")\r\n        } else {\r\n          this.$http.get(\"/checkInfo/judgeCheckIsExist\", {\r\n            params: {\r\n              \"userId\": this.user.id,\r\n              \"checkYear\": this.checkInfoData.checkYear\r\n            }\r\n          }).then(res => {\r\n            if (res.status === 200) {\r\n              if (res.data === false) {\r\n                this.$message.error(\"该学生此学年体检单已存在，请重新选择学年!\")\r\n              }\r\n            }\r\n          })\r\n        }\r\n      },\r\n      saveSuggestion(data) {\r\n        this.$http.post(\"/suggestion/add\", data).then(res => {\r\n          if (res.status === 200) {\r\n            this.$message.success(\"留言成功\");\r\n            this.dialogShowVisible = false;\r\n          }\r\n        })\r\n      }\r\n    },\r\n    mounted() {\r\n      this.initData();\r\n      this.getAllUser();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .el-form-item.is-required:not(.is-no-asterisk) > .el-form-item__label:before {\r\n    margin-right: 0;\r\n  }\r\n</style>\r\n"]}]}