{"remainingRequest":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea_workspace\\healthy-manager-front\\src\\views\\user\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\idea_workspace\\healthy-manager-front\\src\\views\\user\\Index.vue","mtime":1617034347120},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1616656090222},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1616656132299}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Message from '../../components/messages/index.js'\nimport ImageUpload from '../../components/upload/UploadBase64'\n\nexport default {\n  name: \"index\",\n  components: {ImageUpload},\n  data() {\n    const validateString = (rule, value, callback) => {\n      value = value.split(\" \").join(\"\");\n      if (value === '') {\n        callback(new Error('请输入有效值'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      dialogVisible: false,\n      tableData: [],\n      rules: {\n        stuNo: [\n          {required: true, message: '请输入学号', trigger: 'blur'}\n        ],\n        name: [\n          {required: true, message: '请输入姓名', trigger: 'blur'}\n        ],\n\n      },\n      searchData: {\n        pageSize: 10,\n        pageNum: 1,\n        total: 0,\n        clauses: [{\n          column: \"college\",\n          operation: \"like\",\n          value: \"\"\n        }, {\n          column: \"major\",\n          operation: \"like\",\n          value: \"\"\n        }, {\n          column: \"name\",\n          operation: \"like\",\n          value: \"\"\n        }, {\n          column: \"stuNo\",\n          operation: \"like\",\n          value: \"\"\n        }, {\n          column: \"roleId\",\n          operation: \"=\",\n          value: \"\"\n        },]\n      },\n      userData: {},\n      disabled: true,\n      title: \"添加用户\",\n      roleOptions: [],\n      roleDisabled: false,\n      teacherOptions: []\n    }\n  },\n  methods: {\n    handleClose() {\n      this.dialogVisible = false;\n    },\n    initData() {\n      let roleData = JSON.parse(localStorage.getItem(\"role\"));\n      if (roleData.roleName === '辅导员') {\n        this.searchData.clauses[4].value = 2\n      }\n      this.$http.post(\"/user/page\", this.searchData).then(res => {\n        if (res.status === 200) {\n          this.tableData = res.data.list;\n          this.searchData.total = res.data.total;\n        }\n      })\n    },\n    handleSizeChange(val) {\n      this.searchData.pageSize = val;\n      this.initData();\n    },\n    handleCurrentChange(val) {\n      this.searchData.pageNum = val;\n      this.initData();\n    },\n    addUser() {\n      this.userData = {};\n      let roleData = JSON.parse(localStorage.getItem(\"role\"));\n      let user = JSON.parse(localStorage.getItem(\"user\"));\n      if (roleData.roleName === '辅导员') {\n        this.userData.roleId = 2;\n        this.userData.teacherId = user.id;\n        this.roleDisabled = true;\n      } else {\n        this.roleDisabled = false;\n      }\n      this.title = \"添加用户\";\n      this.dialogVisible = true;\n      this.disabled = false;\n    },\n    showRow(data) {\n      this.title = \"查看用户\";\n      this.disabled = true;\n      this.roleDisabled = true;\n      this.userData = data;\n      this.dialogVisible = true;\n    },\n    updateRow(index, data) {\n      this.title = \"编辑用户\";\n      let roleData = JSON.parse(localStorage.getItem(\"role\"));\n      if (roleData.roleName === '辅导员') {\n        this.roleDisabled = true;\n      } else {\n        this.roleDisabled = false;\n      }\n      this.disabled = false;\n      this.$http.get(\"/user/get/\" + data[index].id).then(res => {\n        if (res.status === 200) {\n          this.userData = res.data;\n          this.dialogVisible = true;\n        }\n      })\n    },\n    deleteRow(index, data) {\n      Message.confirm(\"是否删除该用户?\").then(() => {\n        this.$http.get(\"/user/delete/\" + data[index].id).then(res => {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n            this.initData();\n          }\n        })\n      })\n    },\n    saveData() {\n      if (this.userData.id == null || this.userData.id === \"\") {\n        this.$http.post(\"/user/add\", this.userData).then(res => {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n            this.initData();\n          }\n        })\n      } else {\n        this.$http.post(\"/user/update\", this.userData).then(res => {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n            this.initData();\n          }\n        })\n      }\n      this.dialogVisible = false;\n    },\n    getAllRole() {\n      this.$http.get(\"/role/all\").then(res => {\n        if (res.status === 200) {\n          this.roleOptions = res.data;\n        }\n      })\n    },\n    getAllTeacher() {\n      this.$http.get(\"/user/getAllStudent/3\").then(res => {\n        if (res.status === 200) {\n          this.teacherOptions = res.data;\n        }\n      })\n    }\n  },\n  mounted() {\n    this.initData();\n    this.getAllRole();\n    this.getAllTeacher();\n  },\n  filters: {\n    RoleNameFilter: (data) => {\n      let res = JSON.parse(localStorage.getItem(\"roles\"));\n      console.log(res);\n      if (res[data - 1] != null) {\n        return res[data - 1].roleName\n      }\n\n    }\n  }\n}\n",{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsPA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\r\n  <div style=\"display: flex;flex-direction: column;align-items: center\">\r\n    <div style=\"margin: 40px 0\"><h1>用户管理</h1></div>\r\n    <el-card style=\"width: 80%\">\r\n      <div style=\"width: 100%;display: flex;flex-direction: row;justify-content: space-around;margin-bottom: 20px\">\r\n        <div>\r\n          <el-input placeholder=\"根据学院筛选\" v-model=\"searchData.clauses[0].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <div>\r\n          <el-input placeholder=\"根据专业筛选\" v-model=\"searchData.clauses[1].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <div>\r\n          <el-input placeholder=\"根据姓名筛选\" v-model=\"searchData.clauses[2].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <div>\r\n          <el-input placeholder=\"根据学号筛选\" v-model=\"searchData.clauses[3].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" type=\"info\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"addUser\">添加用户</el-button>\r\n      </div>\r\n      <el-table\r\n              :data=\"tableData\"\r\n              style=\"width: 100%;margin-bottom: 20px\">\r\n        <el-table-column\r\n                type=\"index\"\r\n                width=\"50\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"updateDatetime\"\r\n                label=\"更新日期\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"name\"\r\n                label=\"姓名\"\r\n                align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                label=\"角色Id\"\r\n                align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{scope.row.roleId | RoleNameFilter}}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"stuNo\"\r\n                label=\"学号\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"college\"\r\n                align=\"center\"\r\n                label=\"学院\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"major\"\r\n                align=\"center\"\r\n                label=\"专业\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"grade\"\r\n                label=\"班级\"\r\n                align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                fixed=\"right\"\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"230\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n                    @click.native.prevent=\"showRow(scope.row)\"\r\n                    size=\"small\">\r\n              查看\r\n            </el-button>\r\n            <el-button\r\n                    @click.native.prevent=\"updateRow(scope.$index, tableData)\"\r\n                    size=\"small\">\r\n              编辑\r\n            </el-button>\r\n            <el-button\r\n                    @click.native.prevent=\"deleteRow(scope.$index, tableData)\"\r\n                    size=\"small\">\r\n              删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div>\r\n        <el-pagination\r\n                style=\"float: left;margin-bottom: 20px\"\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"searchData.pageNum\"\r\n                :page-sizes=\"[10, 15, 20, 30]\"\r\n                :page-size=\"searchData.pageSize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"searchData.total\">\r\n        </el-pagination>\r\n      </div>\r\n    </el-card>\r\n    <el-dialog :title=\"title\"\r\n               width=\"60%\"\r\n               :modal=\"false\"\r\n               :before-close=\"handleClose\"\r\n               :visible.sync=\"dialogVisible\">\r\n      <div style=\"width: 100%;display: flex;align-items: center;flex-direction: column\">\r\n        <el-form :model=\"userData\" :rules=\"rules\" ref=\"userData\" label-width=\"32%\" style=\"width: 90%;\"\r\n                 label-position=\"left\">\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"角色\" label-width=\"20%\">\r\n                <el-select :disabled=\"roleDisabled\" :value=\"userData.roleId\" v-model=\"userData.roleId\">\r\n                  <el-option v-for=\"item in roleOptions\" :key=\"item.id\" :label=\"item.roleName\"\r\n                             :value=\"item.id\"></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"辅导员\" label-width=\"20%\">\r\n                <el-select :disabled=\"roleDisabled\" :value=\"userData.teacherId\" v-model=\"userData.teacherId\">\r\n                  <el-option v-for=\"item in teacherOptions\" :key=\"item.id\" :label=\"item.name\"\r\n                             :value=\"item.id\"></el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n\r\n          <el-alert title=\"学生基本信息\"\r\n                    type=\"success\"\r\n                    :closable=\"false\" style=\"margin-bottom: 10px\"></el-alert>\r\n          <el-row>\r\n            <el-col :span=\"18\">\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"学院\" prop=\"college\">\r\n                    <el-input :disabled=\"disabled\" v-model=\"userData.college\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"专业\" prop=\"major\">\r\n                    <el-input :disabled=\"disabled\" v-model=\"userData.major\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"班级\" prop=\"grade\">\r\n                    <el-input :disabled=\"disabled\" v-model=\"userData.grade\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"学号\" prop=\"stuNo\">\r\n                    <el-input :disabled=\"disabled\" v-model=\"userData.stuNo\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"姓名\" prop=\"name\">\r\n                    <el-input v-model=\"userData.name\" :disabled=\"disabled\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"性别\" prop=\"sex\">\r\n                    <el-radio :disabled=\"disabled\" label=\"男\" v-model=\"userData.sex\"></el-radio>\r\n                    <el-radio :disabled=\"disabled\" label=\"女\" v-model=\"userData.sex\"></el-radio>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"出生\" prop=\"birth\">\r\n                    <el-date-picker v-model=\"userData.birth\" :disabled=\"disabled\"></el-date-picker>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"实际年龄\" prop=\"realAge\">\r\n                    <el-input type=\"number\" v-model=\"userData.realAge\" :disabled=\"disabled\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"文化程度\" prop=\"cultureLevel\">\r\n                    <el-input v-model=\"userData.cultureLevel\" :disabled=\"disabled\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"名族\" prop=\"nation\">\r\n                    <el-input v-model=\"userData.nation\" :disabled=\"disabled\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"职业\" prop=\"occupation\">\r\n                    <el-input v-model=\"userData.occupation\" :disabled=\"disabled\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"籍贯\" prop=\"nativePlace\">\r\n                    <el-input v-model=\"userData.nativePlace\" :disabled=\"disabled\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label-width=\"5%\">\r\n                <image-upload v-model=\"userData.photo\"></image-upload>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"现家庭住址\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" :disabled=\"disabled\" v-model=\"userData.presentAddress\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"毕业学校或工作单位\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" :disabled=\"disabled\" v-model=\"userData.workPlace\"></el-input>\r\n          </el-form-item>\r\n          <template>\r\n            <el-form-item>\r\n              <el-button type=\"success\" @click=\"disabled=false\">编辑</el-button>\r\n              <el-button :disabled=\"disabled\" type=\"primary\" @click=\"saveData\">保存</el-button>\r\n              <el-button @click=\"handleClose\">取消</el-button>\r\n            </el-form-item>\r\n          </template>\r\n        </el-form>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Message from '../../components/messages/index.js'\r\n  import ImageUpload from '../../components/upload/UploadBase64'\r\n\r\n  export default {\r\n    name: \"index\",\r\n    components: {ImageUpload},\r\n    data() {\r\n      const validateString = (rule, value, callback) => {\r\n        value = value.split(\" \").join(\"\");\r\n        if (value === '') {\r\n          callback(new Error('请输入有效值'));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      return {\r\n        dialogVisible: false,\r\n        tableData: [],\r\n        rules: {\r\n          stuNo: [\r\n            {required: true, message: '请输入学号', trigger: 'blur'}\r\n          ],\r\n          name: [\r\n            {required: true, message: '请输入姓名', trigger: 'blur'}\r\n          ],\r\n\r\n        },\r\n        searchData: {\r\n          pageSize: 10,\r\n          pageNum: 1,\r\n          total: 0,\r\n          clauses: [{\r\n            column: \"college\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }, {\r\n            column: \"major\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }, {\r\n            column: \"name\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }, {\r\n            column: \"stuNo\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }, {\r\n            column: \"roleId\",\r\n            operation: \"=\",\r\n            value: \"\"\r\n          },]\r\n        },\r\n        userData: {},\r\n        disabled: true,\r\n        title: \"添加用户\",\r\n        roleOptions: [],\r\n        roleDisabled: false,\r\n        teacherOptions: []\r\n      }\r\n    },\r\n    methods: {\r\n      handleClose() {\r\n        this.dialogVisible = false;\r\n      },\r\n      initData() {\r\n        let roleData = JSON.parse(localStorage.getItem(\"role\"));\r\n        if (roleData.roleName === '辅导员') {\r\n          this.searchData.clauses[4].value = 2\r\n        }\r\n        this.$http.post(\"/user/page\", this.searchData).then(res => {\r\n          if (res.status === 200) {\r\n            this.tableData = res.data.list;\r\n            this.searchData.total = res.data.total;\r\n          }\r\n        })\r\n      },\r\n      handleSizeChange(val) {\r\n        this.searchData.pageSize = val;\r\n        this.initData();\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.searchData.pageNum = val;\r\n        this.initData();\r\n      },\r\n      addUser() {\r\n        this.userData = {};\r\n        let roleData = JSON.parse(localStorage.getItem(\"role\"));\r\n        let user = JSON.parse(localStorage.getItem(\"user\"));\r\n        if (roleData.roleName === '辅导员') {\r\n          this.userData.roleId = 2;\r\n          this.userData.teacherId = user.id;\r\n          this.roleDisabled = true;\r\n        } else {\r\n          this.roleDisabled = false;\r\n        }\r\n        this.title = \"添加用户\";\r\n        this.dialogVisible = true;\r\n        this.disabled = false;\r\n      },\r\n      showRow(data) {\r\n        this.title = \"查看用户\";\r\n        this.disabled = true;\r\n        this.roleDisabled = true;\r\n        this.userData = data;\r\n        this.dialogVisible = true;\r\n      },\r\n      updateRow(index, data) {\r\n        this.title = \"编辑用户\";\r\n        let roleData = JSON.parse(localStorage.getItem(\"role\"));\r\n        if (roleData.roleName === '辅导员') {\r\n          this.roleDisabled = true;\r\n        } else {\r\n          this.roleDisabled = false;\r\n        }\r\n        this.disabled = false;\r\n        this.$http.get(\"/user/get/\" + data[index].id).then(res => {\r\n          if (res.status === 200) {\r\n            this.userData = res.data;\r\n            this.dialogVisible = true;\r\n          }\r\n        })\r\n      },\r\n      deleteRow(index, data) {\r\n        Message.confirm(\"是否删除该用户?\").then(() => {\r\n          this.$http.get(\"/user/delete/\" + data[index].id).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        })\r\n      },\r\n      saveData() {\r\n        if (this.userData.id == null || this.userData.id === \"\") {\r\n          this.$http.post(\"/user/add\", this.userData).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        } else {\r\n          this.$http.post(\"/user/update\", this.userData).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        }\r\n        this.dialogVisible = false;\r\n      },\r\n      getAllRole() {\r\n        this.$http.get(\"/role/all\").then(res => {\r\n          if (res.status === 200) {\r\n            this.roleOptions = res.data;\r\n          }\r\n        })\r\n      },\r\n      getAllTeacher() {\r\n        this.$http.get(\"/user/getAllStudent/3\").then(res => {\r\n          if (res.status === 200) {\r\n            this.teacherOptions = res.data;\r\n          }\r\n        })\r\n      }\r\n    },\r\n    mounted() {\r\n      this.initData();\r\n      this.getAllRole();\r\n      this.getAllTeacher();\r\n    },\r\n    filters: {\r\n      RoleNameFilter: (data) => {\r\n        let res = JSON.parse(localStorage.getItem(\"roles\"));\r\n        console.log(res);\r\n        if (res[data - 1] != null) {\r\n          return res[data - 1].roleName\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .el-date-editor.el-input, .el-date-editor.el-input__inner {\r\n    width: 150px;\r\n  }\r\n\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 241px;\r\n    line-height: 241px;\r\n    text-align: center;\r\n    border: 1px solid #8c939d;\r\n  }\r\n\r\n  .avatar {\r\n    width: 178px;\r\n    height: 241px;;\r\n    display: block;\r\n  }\r\n</style>\r\n"]}]}