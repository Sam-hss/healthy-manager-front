{"remainingRequest":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea_workspace\\healthy-manager-front\\src\\views\\knowledge\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\idea_workspace\\healthy-manager-front\\src\\views\\knowledge\\Index.vue","mtime":1618388589672},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1616656090222},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1616656132299}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport BookRead from './BookRead'\nimport Message from '../../components/messages/index.js'\n\nexport default {\n  name: \"Index\",\n  data() {\n    return {\n      title: \"添加健康知识\",\n      dialogVisible: false,\n      bookVisible: false,\n      bookData: {\n        publishData: \"\",\n        author: \"\",\n        book: \"\",\n        visitNum: 0,\n        description: \"\",\n        content: \"\",\n        isPublished: 1\n      },\n      tableData: [],\n      searchData: {\n        pageSize: 10,\n        pageNum: 1,\n        clauses: [{\n          column: \"isPublished\",\n          operation: \"=\",\n          value: 1\n        }, {\n          column: \"author\",\n          operation: \"like\",\n          value: \"\"\n        }, {\n          column: \"book\",\n          operation: \"like\",\n          value: \"\"\n        }, {\n          column: \"content\",\n          operation: \"like\",\n          value: \"\"\n        }]\n      },\n      total: 0,\n      documentType: \"已发布\"\n    }\n  },\n  methods: {\n    handleClose() {\n      this.dialogVisible = false;\n      this.bookData = {};\n    },\n    handleBookClose() {\n      this.bookVisible = false;\n    },\n    handleCurrentChange(val) {\n      this.searchData.pageNum = val;\n      this.initData();\n    },\n    initData() {\n      this.$http.post(\"/healthDocument/page\", this.searchData).then(res => {\n        if (res.status === 200) {\n          this.tableData = res.data.list;\n          this.total = res.data.pages;\n        }\n      })\n    },\n    //打开添加文章弹窗\n    addBook() {\n      this.title = \"添加健康知识\";\n      this.dialogVisible = true;\n      this.bookData = {};\n\n    },\n    editBook(index, data) {\n      this.title = \"修改健康知识\";\n      this.$http.get(\"/healthDocument/get/\" + data[index].id).then(res => {\n        if (res.status === 200) {\n          this.bookData = res.data;\n        }\n      });\n      this.dialogVisible = true;\n\n    },\n    //提交添加的文章\n    submitData(data, type) {\n      if (type === 'save') {\n        data.isPublished = 0;\n      } else {\n        data.isPublished = 1;\n      }\n      if (data.id == null || data.id === \"\") {\n        this.$http.post(\"/healthDocument/add\", data).then(res => {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n            this.initData();\n          }\n        })\n      } else {\n        this.$http.post(\"/healthDocument/update\", data).then(res => {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n            this.initData();\n          }\n        })\n      }\n      this.dialogVisible = false;\n    },\n    showBook(index, data) {\n      this.bookData = data[index];\n      this.bookVisible = true;\n    },\n    deleteRow(index, data) {\n      Message.confirm(\"是否需要删除该文章？\").then(() => {\n        this.$http.get(\"/healthDocument/delete/\" + data[index].id).then(res => {\n          if (res.status === 200) {\n            Message.success(\"操作成功\");\n            this.initData();\n          }\n        })\n      })\n    }\n  },\n  components: {\n    BookRead\n  },\n  mounted() {\n    this.initData()\n  },\n  watch: {\n    \"documentType\": function (val) {\n      if (val === '已发布') {\n        this.searchData.clauses[0].value = 1;\n        this.initData();\n      }\n      if (val === '草稿箱') {\n        this.searchData.clauses[0].value = 0;\n        this.initData();\n      }\n    }\n  }\n}\n",{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/knowledge","sourcesContent":["<template>\r\n  <div style=\"display: flex;flex-direction: column;align-items: center\">\r\n    <div style=\"margin: 40px 0\"><h1>健康知识管理</h1></div>\r\n    <el-card style=\"width: 80%\">\r\n      <div>\r\n        <el-radio-group style=\"margin-bottom: 20px\" v-model=\"documentType\">\r\n          <el-radio-button label=\"已发布\"></el-radio-button>\r\n          <el-radio-button label=\"草稿箱\"></el-radio-button>\r\n        </el-radio-group>\r\n      </div>\r\n      <div style=\"width: 100%;display: flex;flex-direction: row;justify-content: space-around;margin-bottom: 20px\">\r\n        <div>\r\n          <el-input placeholder=\"根据作者筛选\" v-model=\"searchData.clauses[1].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" type=\"info\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <div>\r\n          <el-input placeholder=\"根据书名筛选\" v-model=\"searchData.clauses[2].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <div>\r\n          <el-input placeholder=\"根据内容筛选\" v-model=\"searchData.clauses[3].value\" @blur=\"initData\">\r\n            <template slot=\"append\">\r\n              <el-button icon=\"el-icon-search\" @click=\"initData\"></el-button>\r\n            </template>\r\n          </el-input>\r\n        </div>\r\n        <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"addBook\">添加新文章</el-button>\r\n      </div>\r\n      <el-table\r\n              :data=\"tableData\"\r\n              style=\"width: 100%;margin-bottom: 20px\">\r\n        <el-table-column\r\n                type=\"index\"\r\n                width=\"50\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"publishData\"\r\n                label=\"创建日期\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"book\"\r\n                label=\"书名\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"author\"\r\n                align=\"center\"\r\n                label=\"作者\"\r\n                width=\"180\">\r\n        </el-table-column>\r\n<!--        <el-table-column-->\r\n<!--                prop=\"visitNum\"-->\r\n<!--                align=\"center\"-->\r\n<!--                label=\"阅读量\"-->\r\n<!--                width=\"180\">-->\r\n<!--        </el-table-column>-->\r\n        <el-table-column\r\n                prop=\"description\"\r\n                label=\"简介\"\r\n                align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                fixed=\"right\"\r\n                align=\"center\"\r\n                label=\"操作\"\r\n                width=\"230\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n                    @click.native.prevent=\"showBook(scope.$index, tableData)\"\r\n                    size=\"small\">\r\n              阅读\r\n            </el-button>\r\n            <el-button\r\n                    @click.native.prevent=\"editBook(scope.$index, tableData)\"\r\n                    size=\"small\">\r\n              编辑\r\n            </el-button>\r\n            <el-button\r\n                    @click.native.prevent=\"deleteRow(scope.$index, tableData)\"\r\n                    size=\"small\">\r\n              删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <el-pagination\r\n              background\r\n              layout=\"prev, pager, next\"\r\n              @current-change=\"handleCurrentChange\"\r\n              :page-size=\"this.searchData.pageSize\"\r\n              :total=\"total\">\r\n      </el-pagination>\r\n    </el-card>\r\n    <el-dialog\r\n            :title=\"title\"\r\n            width=\"70%\"\r\n            :modal=\"false\"\r\n            :before-close=\"handleClose\"\r\n            :visible.sync=\"dialogVisible\">\r\n      <el-form :model=\"bookData\" label-width=\"10%\" label-position=\"left\" style=\"padding: 10px 60px\">\r\n        <el-form-item label=\"文章名\">\r\n          <el-input v-model=\"bookData.book\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"作者\">\r\n          <el-input v-model=\"bookData.author\" style=\"width: 200px\"></el-input>\r\n        </el-form-item>\r\n        <!--<el-form-item label=\"阅读量\">\r\n          <el-input-number v-model=\"bookData.visitNum\"></el-input-number>\r\n        </el-form-item>-->\r\n        <el-form-item label=\"简介\">\r\n          <el-input type=\"textarea\" v-model=\"bookData.description\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"正文\" style=\"height: 300px\">\r\n          <quill-editor style=\"height: 200px\" v-model=\"bookData.content\">\r\n          </quill-editor>\r\n        </el-form-item>\r\n        <template>\r\n          <el-form-item>\r\n            <el-button type=\"danger\" @click=\"submitData(bookData,'save')\">保存到草稿箱</el-button>\r\n            <el-button type=\"success\" @click=\"submitData(bookData,'publish')\">发布</el-button>\r\n            <el-button @click=\"handleClose\">取消</el-button>\r\n          </el-form-item>\r\n        </template>\r\n\r\n      </el-form>\r\n    </el-dialog>\r\n    <el-dialog title=\"阅读健康知识\"\r\n               width=\"70%\"\r\n               :modal=\"false\"\r\n               :before-close=\"handleBookClose\"\r\n               :visible.sync=\"bookVisible\">\r\n      <book-read :book-data=\"bookData\"></book-read>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import BookRead from './BookRead'\r\n  import Message from '../../components/messages/index.js'\r\n\r\n  export default {\r\n    name: \"Index\",\r\n    data() {\r\n      return {\r\n        title: \"添加健康知识\",\r\n        dialogVisible: false,\r\n        bookVisible: false,\r\n        bookData: {\r\n          publishData: \"\",\r\n          author: \"\",\r\n          book: \"\",\r\n          visitNum: 0,\r\n          description: \"\",\r\n          content: \"\",\r\n          isPublished: 1\r\n        },\r\n        tableData: [],\r\n        searchData: {\r\n          pageSize: 10,\r\n          pageNum: 1,\r\n          clauses: [{\r\n            column: \"isPublished\",\r\n            operation: \"=\",\r\n            value: 1\r\n          }, {\r\n            column: \"author\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }, {\r\n            column: \"book\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }, {\r\n            column: \"content\",\r\n            operation: \"like\",\r\n            value: \"\"\r\n          }]\r\n        },\r\n        total: 0,\r\n        documentType: \"已发布\"\r\n      }\r\n    },\r\n    methods: {\r\n      handleClose() {\r\n        this.dialogVisible = false;\r\n        this.bookData = {};\r\n      },\r\n      handleBookClose() {\r\n        this.bookVisible = false;\r\n      },\r\n      handleCurrentChange(val) {\r\n        this.searchData.pageNum = val;\r\n        this.initData();\r\n      },\r\n      initData() {\r\n        this.$http.post(\"/healthDocument/page\", this.searchData).then(res => {\r\n          if (res.status === 200) {\r\n            this.tableData = res.data.list;\r\n            this.total = res.data.pages;\r\n          }\r\n        })\r\n      },\r\n      //打开添加文章弹窗\r\n      addBook() {\r\n        this.title = \"添加健康知识\";\r\n        this.dialogVisible = true;\r\n        this.bookData = {};\r\n\r\n      },\r\n      editBook(index, data) {\r\n        this.title = \"修改健康知识\";\r\n        this.$http.get(\"/healthDocument/get/\" + data[index].id).then(res => {\r\n          if (res.status === 200) {\r\n            this.bookData = res.data;\r\n          }\r\n        });\r\n        this.dialogVisible = true;\r\n\r\n      },\r\n      //提交添加的文章\r\n      submitData(data, type) {\r\n        if (type === 'save') {\r\n          data.isPublished = 0;\r\n        } else {\r\n          data.isPublished = 1;\r\n        }\r\n        if (data.id == null || data.id === \"\") {\r\n          this.$http.post(\"/healthDocument/add\", data).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        } else {\r\n          this.$http.post(\"/healthDocument/update\", data).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        }\r\n        this.dialogVisible = false;\r\n      },\r\n      showBook(index, data) {\r\n        this.bookData = data[index];\r\n        this.bookVisible = true;\r\n      },\r\n      deleteRow(index, data) {\r\n        Message.confirm(\"是否需要删除该文章？\").then(() => {\r\n          this.$http.get(\"/healthDocument/delete/\" + data[index].id).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"操作成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        })\r\n      }\r\n    },\r\n    components: {\r\n      BookRead\r\n    },\r\n    mounted() {\r\n      this.initData()\r\n    },\r\n    watch: {\r\n      \"documentType\": function (val) {\r\n        if (val === '已发布') {\r\n          this.searchData.clauses[0].value = 1;\r\n          this.initData();\r\n        }\r\n        if (val === '草稿箱') {\r\n          this.searchData.clauses[0].value = 0;\r\n          this.initData();\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n"]}]}