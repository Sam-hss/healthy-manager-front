{"remainingRequest":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea_workspace\\healthy-manager-front\\src\\views\\selfInfo\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\idea_workspace\\healthy-manager-front\\src\\views\\selfInfo\\Index.vue","mtime":1618420510596},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1616656090222},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1616656132299}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Message from '../../components/messages/index'\nimport ImageInput from '../../components/upload/UploadBase64.vue'\n\nexport default {\n  name: \"index\",\n  components: {ImageInput},\n  data() {\n    return {\n      userData: {},\n      disable: true,\n      heightData: 0,\n      weightData: 0,\n      bim: 0,\n      suggestion: \"\",\n      label: [],\n      height: [],\n      weight: []\n\n    }\n  },\n  methods: {\n    initData() {\n      let user = JSON.parse(localStorage.getItem(\"user\"));\n      this.$http.get(\"/user/get/\" + user.id).then(res => {\n        if (res.status === 200) {\n          this.userData = res.data\n        }\n      })\n    },\n    saveData() {\n      this.$http.post(\"/user/update\", this.userData).then(res => {\n        if (res.status === 200) {\n          Message.success(\"操作成功\");\n          localStorage.setItem(\"user\", JSON.stringify(this.userData));\n          this.disable = !this.disable;\n          this.initData();\n        }\n      })\n    },\n    getOptions() {\n      console.log(this.label);\n      let Line = echarts.init(document.getElementById(\"line\"));\n      let Bar = echarts.init(document.getElementById(\"bar\"));\n      let Pie = echarts.init(document.getElementById(\"pie\"));\n      let heightOption = {\n        xAxis: {\n          type: 'category',\n          data: this.label,\n          name: \"学期\"\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {            // 坐标轴指示器，坐标轴触发有效\n            type: 'line'        // 默认为直线，可选为：'line' | 'shadow'\n          },\n          formatter: \"{b} <br/>{a} : {c} (cm)\"\n        },\n        yAxis: {\n          type: 'value',\n          name: \"身高（cm）\"\n        },\n        series: [{\n          data: this.height,\n          type: 'line',\n          name: '身高',\n        }]\n      };\n      let weightOption = {\n        xAxis: {\n          type: 'category',\n          data: this.label,\n        },\n        color: ['#3398DB'],\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {            // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\n          },\n          formatter: \"{b} <br/>{a} : {c} (kg)\"\n        },\n        yAxis: {\n          type: 'value',\n          name: \"体重（kg）\"\n        },\n        series: [{\n          data: this.weight,\n          type: 'bar',\n          barWidth: '20%',\n          name: '体重',\n        }]\n      };\n      let bimOption = {\n        tooltip: {\n          formatter: \"{a} <br/>{b} : {c}\"\n        },\n        series: [\n          {\n            name: 'BIM指数',\n            type: 'gauge',\n            detail: {formatter: '{value}'},\n            data: [{value: this.bim, name: '数值'}]\n          }\n        ]\n      };\n      Line.setOption(heightOption);\n      Bar.setOption(weightOption);\n      Pie.setOption(bimOption);\n    },\n    getDataAnalysis() {\n      let user = JSON.parse(localStorage.getItem(\"user\"));\n      let checkData = JSON.parse(localStorage.getItem(\"checkData\"));\n      this.heightData = checkData.height;\n      this.weightData = checkData.weight;\n      this.$http.get(\"/checkInfo/getBim\", {\n        params: {\n          \"height\": this.heightData,\n          \"weight\": this.weightData\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          this.bim = res.data.bim;\n          this.suggestion = res.data.suggestion;\n        }\n      });\n      this.$http.get(\"/checkInfo/getDataAnalysis/\" + user.id).then(res => {\n        if (res.status === 200) {\n          this.label = res.data.label;\n          this.height = res.data.height;\n          this.weight = res.data.weight;\n          this.getOptions();\n        }\n      }).catch(() => Message.error(\"访问出错!\"))\n    },\n\n  },\n  mounted() {\n    this.initData();\n    this.getDataAnalysis();\n  },\n  created() {\n\n  }\n}\n",{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsHA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Index.vue","sourceRoot":"src/views/selfInfo","sourcesContent":["<template>\r\n  <div style=\"display: flex;flex-direction: column;align-items: center;width: 100%;\">\r\n    <el-card style=\"width: 80%;margin-top: 20px\">\r\n      <el-divider content-position=\"left\">身高体重分析</el-divider>\r\n      <el-row style=\"text-align: center\">\r\n        <el-col :span=\"8\">当前身高:{{heightData}}cm\r\n          <div style=\"width: 100%;height: 300px\" id=\"line\"></div>\r\n        </el-col>\r\n        <el-col :span=\"8\">当前体重:{{weightData}}kg\r\n          <div style=\"width: 100%;height: 300px\" id=\"bar\"></div>\r\n        </el-col>\r\n        <el-col :span=\"8\">当前BIM指数:{{bim}}({{suggestion}})\r\n          <div style=\"width: 100%;height: 300px\" id=\"pie\"></div>\r\n        </el-col>\r\n      </el-row>\r\n      <el-divider content-position=\"left\">基本信息</el-divider>\r\n      <div style=\"width: 100%;display: flex;align-items: center;flex-direction: column\">\r\n        <el-form :model=\"userData\" ref=\"userData\" label-width=\"32%\" style=\"width: 90%;margin-top: 40px\"\r\n                 label-position=\"left\">\r\n          <template>\r\n            <el-form-item align=\"right\" v-show=\"!disable\">\r\n              <el-button :disabled=\"disable\" type=\"primary\" @click=\"saveData\">保存</el-button>\r\n            </el-form-item>\r\n            <el-form-item align=\"right\" v-show=\"disable\">\r\n              <el-button :disabled=\"!disable\" type=\"info\" @click=\"disable=!disable\">修改</el-button>\r\n            </el-form-item>\r\n          </template>\r\n          <el-row>\r\n            <el-col :span=\"18\">\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"学号\" prop=\"stuNo\">\r\n                    <el-input :disabled=\"disable\" v-model=\"userData.stuNo\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"姓名\" prop=\"name\">\r\n                    <el-input v-model=\"userData.name\" :disabled=\"disable\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"性别\" prop=\"sex\">\r\n                    <el-radio :disabled=\"disable\" label=\"男\" v-model=\"userData.sex\"></el-radio>\r\n                    <el-radio :disabled=\"disable\" label=\"女\" v-model=\"userData.sex\"></el-radio>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"学院\" prop=\"college\">\r\n                    <el-input :disabled=\"disable\" v-model=\"userData.college\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"专业\" prop=\"major\">\r\n                    <el-input :disabled=\"disable\" v-model=\"userData.major\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"班级\" prop=\"grade\">\r\n                    <el-input :disabled=\"disable\" v-model=\"userData.grade\" autocomplete=\"off\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"出生\" prop=\"birth\">\r\n                    <el-date-picker v-model=\"userData.birth\" :disabled=\"disable\"></el-date-picker>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"实际年龄\" prop=\"realAge\">\r\n                    <el-input type=\"number\" v-model=\"userData.realAge\" :disabled=\"disable\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"文化程度\" prop=\"cultureLevel\">\r\n                    <el-input v-model=\"userData.cultureLevel\" :disabled=\"disable\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n              <el-row>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"民族\" prop=\"nation\">\r\n                    <el-input v-model=\"userData.nation\" :disabled=\"disable\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"职业\" prop=\"occupation\">\r\n                    <el-input v-model=\"userData.occupation\" :disabled=\"disable\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                  <el-form-item label=\"籍贯\" prop=\"nativePlace\">\r\n                    <el-input v-model=\"userData.nativePlace\" :disabled=\"disable\"></el-input>\r\n                  </el-form-item>\r\n                </el-col>\r\n              </el-row>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-form-item label-width=\"5%\">\r\n                <image-input v-model=\"userData.photo\"></image-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n          <el-form-item label=\"现家庭住址\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" :disabled=\"disable\" v-model=\"userData.presentAddress\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"毕业学校或工作单位\" label-width=\"10%\">\r\n            <el-input type=\"textarea\" :disabled=\"disable\" :rows=\"4\" v-model=\"userData.workPlace\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Message from '../../components/messages/index'\r\n  import ImageInput from '../../components/upload/UploadBase64.vue'\r\n\r\n  export default {\r\n    name: \"index\",\r\n    components: {ImageInput},\r\n    data() {\r\n      return {\r\n        userData: {},\r\n        disable: true,\r\n        heightData: 0,\r\n        weightData: 0,\r\n        bim: 0,\r\n        suggestion: \"\",\r\n        label: [],\r\n        height: [],\r\n        weight: []\r\n\r\n      }\r\n    },\r\n    methods: {\r\n      initData() {\r\n        let user = JSON.parse(localStorage.getItem(\"user\"));\r\n        this.$http.get(\"/user/get/\" + user.id).then(res => {\r\n          if (res.status === 200) {\r\n            this.userData = res.data\r\n          }\r\n        })\r\n      },\r\n      saveData() {\r\n        this.$http.post(\"/user/update\", this.userData).then(res => {\r\n          if (res.status === 200) {\r\n            Message.success(\"操作成功\");\r\n            localStorage.setItem(\"user\", JSON.stringify(this.userData));\r\n            this.disable = !this.disable;\r\n            this.initData();\r\n          }\r\n        })\r\n      },\r\n      getOptions() {\r\n        console.log(this.label);\r\n        let Line = echarts.init(document.getElementById(\"line\"));\r\n        let Bar = echarts.init(document.getElementById(\"bar\"));\r\n        let Pie = echarts.init(document.getElementById(\"pie\"));\r\n        let heightOption = {\r\n          xAxis: {\r\n            type: 'category',\r\n            data: this.label,\r\n            name: \"学期\"\r\n          },\r\n          tooltip: {\r\n            trigger: 'axis',\r\n            axisPointer: {            // 坐标轴指示器，坐标轴触发有效\r\n              type: 'line'        // 默认为直线，可选为：'line' | 'shadow'\r\n            },\r\n            formatter: \"{b} <br/>{a} : {c} (cm)\"\r\n          },\r\n          yAxis: {\r\n            type: 'value',\r\n            name: \"身高（cm）\"\r\n          },\r\n          series: [{\r\n            data: this.height,\r\n            type: 'line',\r\n            name: '身高',\r\n          }]\r\n        };\r\n        let weightOption = {\r\n          xAxis: {\r\n            type: 'category',\r\n            data: this.label,\r\n          },\r\n          color: ['#3398DB'],\r\n          tooltip: {\r\n            trigger: 'axis',\r\n            axisPointer: {            // 坐标轴指示器，坐标轴触发有效\r\n              type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\r\n            },\r\n            formatter: \"{b} <br/>{a} : {c} (kg)\"\r\n          },\r\n          yAxis: {\r\n            type: 'value',\r\n            name: \"体重（kg）\"\r\n          },\r\n          series: [{\r\n            data: this.weight,\r\n            type: 'bar',\r\n            barWidth: '20%',\r\n            name: '体重',\r\n          }]\r\n        };\r\n        let bimOption = {\r\n          tooltip: {\r\n            formatter: \"{a} <br/>{b} : {c}\"\r\n          },\r\n          series: [\r\n            {\r\n              name: 'BIM指数',\r\n              type: 'gauge',\r\n              detail: {formatter: '{value}'},\r\n              data: [{value: this.bim, name: '数值'}]\r\n            }\r\n          ]\r\n        };\r\n        Line.setOption(heightOption);\r\n        Bar.setOption(weightOption);\r\n        Pie.setOption(bimOption);\r\n      },\r\n      getDataAnalysis() {\r\n        let user = JSON.parse(localStorage.getItem(\"user\"));\r\n        let checkData = JSON.parse(localStorage.getItem(\"checkData\"));\r\n        this.heightData = checkData.height;\r\n        this.weightData = checkData.weight;\r\n        this.$http.get(\"/checkInfo/getBim\", {\r\n          params: {\r\n            \"height\": this.heightData,\r\n            \"weight\": this.weightData\r\n          }\r\n        }).then(res => {\r\n          if (res.status === 200) {\r\n            this.bim = res.data.bim;\r\n            this.suggestion = res.data.suggestion;\r\n          }\r\n        });\r\n        this.$http.get(\"/checkInfo/getDataAnalysis/\" + user.id).then(res => {\r\n          if (res.status === 200) {\r\n            this.label = res.data.label;\r\n            this.height = res.data.height;\r\n            this.weight = res.data.weight;\r\n            this.getOptions();\r\n          }\r\n        }).catch(() => Message.error(\"访问出错!\"))\r\n      },\r\n\r\n    },\r\n    mounted() {\r\n      this.initData();\r\n      this.getDataAnalysis();\r\n    },\r\n    created() {\r\n\r\n    }\r\n  }\r\n</script>\r\n"]}]}