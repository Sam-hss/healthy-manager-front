{"remainingRequest":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea_workspace\\healthy-manager-front\\src\\views\\role\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\idea_workspace\\healthy-manager-front\\src\\views\\role\\index.vue","mtime":1617034347104},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\babel-loader\\lib\\index.js","mtime":1616656090222},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616656130250},{"path":"D:\\idea_workspace\\healthy-manager-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1616656132299}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// import moment from 'moment'\nimport Message from '../../components/messages/index'\n\nexport default {\n  name: \"Role\",\n  data() {\n    return {\n      search: {\n        pageSize: 10,\n        pageNum: 1,\n        clauses: [\n          {\n            column: \"remark\",\n            operation: \"like\",\n            value: \"\"\n          }\n        ],\n        sortMap: {}\n      },\n      total: 0,\n      roleData: [],\n      dialogVisible: false,\n      role: {},\n      title: \"\",\n      loadFlag: false,\n      searchRole: \"\"\n\n    }\n  },\n  methods: {\n    initData() {\n      this.loadFlag = true;\n      this.$http.post(\"/role/page\", this.search).then(res => {\n        if (res.status === 200) {\n          this.roleData = res.data.list;\n          this.total = res.data.total;\n          this.loadFlag = false;\n        }\n      })\n    },\n    changePage(val) {\n      this.search.pageNum = val;\n      this.initData();\n    },\n    handleEdit(data) {\n      this.title = \"修改角色\";\n      this.role = data;\n      this.dialogVisible = true\n    },\n    submit() {\n      if (this.role.id == null) {\n        this.$http.post(\"/role/add\", this.role).then(res => {\n          if (res.status === 200) {\n            Message.success(\"添加成功\");\n            this.dialogVisible = false\n            this.initData();\n          }\n        })\n      } else {\n        this.$http.post(\"/role/update\", this.role).then(res => {\n          if (res.status === 200) {\n            Message.success(\"添加成功\");\n            this.dialogVisible = false;\n            this.initData();\n          }\n        })\n      }\n    },\n    handleAdd() {\n      this.title = \"新增角色\";\n      this.role = {};\n      this.dialogVisible = true\n    },\n    handleDelete(data) {\n      Message.confirm(\"是否需要删除该角色\").then(() => {\n        this.$http.get(\"/role/delete/\" + data.id).then(res => {\n          if (res.status === 200) {\n            Message.success(\"删除成功\");\n            this.initData();\n          }\n        })\n      })\n    },\n    handleClose() {\n      Message.confirm(\"角色信息未保存，确认需要取消？\").then(() => {\n        this.dialogVisible = false\n      })\n    }\n  },\n  mounted() {\n    this.initData();\n  },\n  filters: {\n    dataFormat: (data) => {\n      return data;\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/role","sourcesContent":["<template>\r\n  <div style=\"display: flex;flex-direction: column;align-items: center\">\r\n    <div style=\"margin: 40px 0\"><h1>角色管理</h1></div>\r\n    <el-card style=\"width: 80%\">\r\n      <el-table\r\n              :data=\"roleData\"\r\n              :v-loading=\"loadFlag\"\r\n              style=\"width: 100%\">\r\n        <el-table-column\r\n                type=\"index\"\r\n                width=\"50\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                label=\"更新日期\"\r\n                min-width=\"280\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{scope.row.updateDatetime | dataFormat}}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"roleName\"\r\n                label=\"角色名称\"\r\n                min-width=\"280\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                prop=\"remark\"\r\n                label=\"角色描述\"\r\n                min-width=\"280\">\r\n        </el-table-column>\r\n        <el-table-column\r\n                align=\"right\"\r\n                width=\"280px\">\r\n          <template slot=\"header\" slot-scope=\"scope\">\r\n            <el-input\r\n                    v-model=\"search.clauses[0].value\"\r\n                    size=\"mini\"\r\n                    @change=\"initData\"\r\n                    placeholder=\"输入角色备注搜索\"/>\r\n          </template>\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n                    size=\"mini\"\r\n                    @click=\"handleEdit(scope.row)\">编辑\r\n            </el-button>\r\n            <el-button\r\n                    size=\"mini\"\r\n                    type=\"danger\"\r\n                    @click=\"handleDelete(scope.row)\">删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div style=\"margin-top: 20px\">\r\n        <el-button size=\"small\" type=\"success\" @click=\"handleAdd\">新增</el-button>\r\n        <el-pagination\r\n                style=\"float: right;\"\r\n                background\r\n                :page-size=\"search.pageSize\"\r\n                @current-change=\"changePage\"\r\n                @prev-click=\"changePage\"\r\n                @next-click=\"changePage\"\r\n                layout=\"prev, pager, next\"\r\n                :total=\"total\">\r\n        </el-pagination>\r\n      </div>\r\n      <el-dialog :title=\"title\" :visible.sync=\"dialogVisible\" width=\"30%\" :modal=\"false\" :before-close=\"handleClose\">\r\n        <el-form :model=\"role\" label-width=\"20%\" label-position=\"left\">\r\n          <el-form-item label=\"角色名\">\r\n            <el-input v-model=\"role.roleName\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"角色描述\">\r\n            <el-input v-model=\"role.remark\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item align=\"center\">\r\n            <template>\r\n              <el-button @click=\"handleClose\">取消</el-button>\r\n              <el-button type=\"success\" @click=\"submit\">确定</el-button>\r\n            </template>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // import moment from 'moment'\r\n  import Message from '../../components/messages/index'\r\n\r\n  export default {\r\n    name: \"Role\",\r\n    data() {\r\n      return {\r\n        search: {\r\n          pageSize: 10,\r\n          pageNum: 1,\r\n          clauses: [\r\n            {\r\n              column: \"remark\",\r\n              operation: \"like\",\r\n              value: \"\"\r\n            }\r\n          ],\r\n          sortMap: {}\r\n        },\r\n        total: 0,\r\n        roleData: [],\r\n        dialogVisible: false,\r\n        role: {},\r\n        title: \"\",\r\n        loadFlag: false,\r\n        searchRole: \"\"\r\n\r\n      }\r\n    },\r\n    methods: {\r\n      initData() {\r\n        this.loadFlag = true;\r\n        this.$http.post(\"/role/page\", this.search).then(res => {\r\n          if (res.status === 200) {\r\n            this.roleData = res.data.list;\r\n            this.total = res.data.total;\r\n            this.loadFlag = false;\r\n          }\r\n        })\r\n      },\r\n      changePage(val) {\r\n        this.search.pageNum = val;\r\n        this.initData();\r\n      },\r\n      handleEdit(data) {\r\n        this.title = \"修改角色\";\r\n        this.role = data;\r\n        this.dialogVisible = true\r\n      },\r\n      submit() {\r\n        if (this.role.id == null) {\r\n          this.$http.post(\"/role/add\", this.role).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"添加成功\");\r\n              this.dialogVisible = false\r\n              this.initData();\r\n            }\r\n          })\r\n        } else {\r\n          this.$http.post(\"/role/update\", this.role).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"添加成功\");\r\n              this.dialogVisible = false;\r\n              this.initData();\r\n            }\r\n          })\r\n        }\r\n      },\r\n      handleAdd() {\r\n        this.title = \"新增角色\";\r\n        this.role = {};\r\n        this.dialogVisible = true\r\n      },\r\n      handleDelete(data) {\r\n        Message.confirm(\"是否需要删除该角色\").then(() => {\r\n          this.$http.get(\"/role/delete/\" + data.id).then(res => {\r\n            if (res.status === 200) {\r\n              Message.success(\"删除成功\");\r\n              this.initData();\r\n            }\r\n          })\r\n        })\r\n      },\r\n      handleClose() {\r\n        Message.confirm(\"角色信息未保存，确认需要取消？\").then(() => {\r\n          this.dialogVisible = false\r\n        })\r\n      }\r\n    },\r\n    mounted() {\r\n      this.initData();\r\n    },\r\n    filters: {\r\n      dataFormat: (data) => {\r\n        return data;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n"]}]}